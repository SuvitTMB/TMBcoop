<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Font (Sarabun) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
        
        /* ปุ่มนำทางหลัก ความกว้าง 50% และความสูงคงที่ 50px จัดกึ่งกลาง */
        .nav-wrapper { @apply flex justify-center w-full px-4 py-6 bg-slate-50/50; }
        .nav-container { @apply flex w-full max-w-md gap-0 overflow-hidden rounded-2xl border-2 border-blue-600 ; }
        .nav-btn { @apply w-1/2 h-[50px] text-[15px] font-bold transition-all duration-300 flex items-center justify-center gap-2 text-center border-none; }
        
        /* สีปุ่มเมื่อเลือก (สีน้ำเงิน) */
        .nav-btn-active { @apply bg-blue-600 text-white shadow-inner; }
        
        /* สีปุ่มเมื่อไม่ได้เลือก (สีเทา) */
        .nav-btn-inactive { @apply bg-gray-200 text-slate-500 hover:bg-gray-300; }
        
        .content-indent { text-indent: 3rem; }
        .shadow-lg { height: 40px;}
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-10">

    <!-- Header Section -->
    <div class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white p-6 rounded-b-[2.5rem] shadow-lg mb-8 relative overflow-hidden" style="height: 167px;">
        <div class="absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10">
            <i data-lucide="calculator" width="150" height="150"></i>
        </div>
        
        <div class="relative z-10 flex flex-col items-center">
            <div class="bg-white/20 p-3 rounded-full mb-3 backdrop-blur-sm">
                <i data-lucide="file-text" width="32" height="32" class="text-white"></i>
            </div>
            <h1 class="text-xl font-bold text-center">รายงานเงินปันผลประจำปี 2025</h1>
            <p class="text-blue-100 text-sm mt-1">สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</p>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="px-2 sm:px-4 max-w-lg mx-auto -mt-10">
        
        <!-- Search Form Screen -->
        <div id="screen-form" class="bg-white rounded-2xl shadow-xl p-6 border border-slate-100 relative z-20">
            <form id="registration-form" class="space-y-6 pt-2">
                <div class="text-center">
                    <div>
                        <label for="idCard" class="block text-sm font-semibold text-gray-700 mb-2">
                            เลขบัตรประจำตัวประชาชน
                        </label>
                        <div class="relative">
                            <input
                                type="text"
                                id="idCard"
                                placeholder="x-xxxx-xxxxx-xx-x"
                                class="w-full text-xl font-mono tracking-wide p-4 rounded-xl border-2 border-gray-200 bg-white focus:border-blue-400 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center"
                                inputmode="numeric"
                                maxlength="17"
                                autocomplete="off"
                            />
                            <i id="icon-check-valid" data-lucide="check-circle" class="hidden absolute right-4 top-1/2 transform -translate-y-1/2 text-green-500 w-6 h-6 animate-fade-in"></i>
                        </div>
                        <div class="flex justify-between items-center mt-2 px-1">
                            <p id="id-helper-text" class="text-xs text-gray-400 font-medium">กรุณากรอกตัวเลขให้ครบ 13 หลัก</p>
                            <div class="flex items-center gap-2">
                                <span class="text-[10px] text-gray-400 uppercase font-bold">จำนวน:</span>
                                <p id="id-counter" class="text-[10px] font-mono text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full">0 / 13</p>
                            </div>
                        </div>
                    </div>

                    <div class="p-4 bg-blue-50 text-blue-800 rounded-xl text-xs flex gap-3 items-start mt-6 text-left border border-blue-100 leading-relaxed">
                        <i data-lucide="info" class="w-5 h-5 shrink-0 text-blue-600"></i>
                        <span>ระบบตรวจสอบรายงานเงินปันผลและการสำรวจการเข้าประชุมใหญ่ สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด ประจำปี 2568</span>
                    </div>
                </div>

                <button
                    type="submit"
                    id="btn-submit"
                    disabled
                    class="w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2 bg-gray-200 text-gray-400 cursor-not-allowed shadow-none"
                >
                    <span id="btn-text">ตรวจสอบข้อมูล</span>
                    <i id="btn-loader" data-lucide="loader-2" class="hidden animate-spin"></i>
                </button>
            </form>
        </div>

        <!-- Result Screen -->
        <div id="screen-success" class="hidden bg-white rounded-2xl shadow-xl overflow-hidden animate-fade-in relative z-20 w-full max-w-lg mx-auto border border-slate-100">
            
            <!-- Navigation Buttons Header (Height 50px) -->
            <div class="nav-wrapper border-gray-100" style="margin:0px auto 20px 5px;">
                <div class="nav-container">
                    <button onclick="window.app.switchTab('report')" id="btn-nav-report" class="nav-btn nav-btn-active transition shadow-lg" style="width:48%; margin:10px auto; color:#0056ff; background:#f1f1f1; padding: 10px auto;">
                        <span><b>รายงานปันผลปี 2025</b></span>
                    </button>
                    <button onclick="window.app.switchTab('survey')" id="btn-nav-survey" class="nav-btn nav-btn-inactive transition shadow-lg" style="width:48%; margin:10px auto; color:#f68b1f; background:#f1f1f1; padding: 10px auto;">
                        <span><b>สำรวจเข้าประชุม</b></span>
                    </button>
                </div>
            </div>

            <!-- Tab Content: Report -->
            <div id="content-report" class="p-6 pt-0 space-y-4 text-sm text-gray-800 leading-relaxed overflow-y-auto max-h-[70vh]">
                <p>เรียน คุณ <span id="res-name-report-1" class="font-bold underline text-blue-700"></span></p>
                <p class="font-bold text-gray-900 underline decoration-blue-200">เรื่อง ขอเชิญประชุมใหญ่สามัญประจำปี 2568</p>
                
                <p class="content-indent">
                    สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด จะประกาศจ่ายเงินปันผล ประจำปี 2568 ในอัตราร้อยละ 4.65 เงินเฉลี่ยคืนดอกเบี้ยเงินกู้อัตราร้อยละ 10.00 และเงินค่าสมนาคุณ 120 บาท ซึ่งสหกรณ์จะโอนเงินดังกล่าว หลังจากได้รับอนุมัติจากที่ประชุมใหญ่แล้ว เข้าบัญชีเงินเดือน ของสมาชิก ในวันที่ 17 กุมภาพันธ์ 2569
                </p>

                <div class="bg-blue-50 p-4 rounded-xl border border-blue-200 mt-4 shadow-sm">
                    <p class="font-bold text-blue-900 mb-2 text-center md:text-left">โดย <span id="res-name-report-2" class="underline decoration-blue-300"></span> เลขที่สมาชิก <span id="res-member-id"></span><br>จะได้รับเงิน ดังนี้</p>
                    <div class="grid grid-cols-2 gap-y-2 border-t border-blue-200 pt-3 mt-2 font-medium">
                        <span class="text-gray-600">เงินปันผล:</span>
                        <div class="text-right font-bold text-blue-700"><span id="res-dividend">0.00</span> บาท</div>
                        <span class="text-gray-600">เงินเฉลี่ยคืน:</span>
                        <div class="text-right font-bold text-blue-700"><span id="res-moneyback">0.00</span> บาท</div>
                        <span class="text-gray-600">เงินค่าสมนาคุณ:</span>
                        <div class="text-right font-bold text-blue-700"><span id="res-gratuity">0.00</span> บาท</div>
                        <span class="text-blue-900 font-bold border-t border-blue-200 pt-2 mt-1">รวมทั้งหมด:</span>
                        <div class="text-right font-bold text-blue-900 border-t border-blue-200 pt-2 mt-1"><span id="res-total">0.00</span> บาท</div>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Survey -->
            <div id="content-survey" class="hidden p-6 pt-0 space-y-4 text-sm text-gray-800 leading-relaxed overflow-y-auto max-h-[70vh]">
                <div id="survey-action-box" class="pb-6 border-b border-gray-100 space-y-4">
                    <p class="font-bold text-center text-blue-900 mb-2 bg-blue-50 py-2 rounded-lg border border-blue-100">แจ้งความประสงค์การเข้าร่วมประชุม</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="window.app.submitSurvey('เข้าร่วม')" class="flex flex-col items-center justify-center p-4 rounded-xl border-2 border-green-100 bg-green-50 text-green-700 hover:border-green-500 hover:bg-green-100 transition-all font-bold shadow-sm active:scale-95">
                            <i data-lucide="check-circle-2" class="mb-1 w-6 h-6"></i>
                            <span class="text-xs text-center">ต้องการเข้าร่วมประชุม</span>
                        </button>
                        <button onclick="window.app.submitSurvey('ไม่เข้าร่วม')" class="flex flex-col items-center justify-center p-4 rounded-xl border-2 border-rose-100 bg-rose-50 text-rose-700 hover:border-rose-500 hover:bg-rose-100 transition-all font-bold shadow-sm active:scale-95">
                            <i data-lucide="x-circle" class="mb-1 w-6 h-6"></i>
                            <span class="text-xs text-center">ไม่เข้าร่วมประชุม</span>
                        </button>
                    </div>
                </div>

                <div id="survey-result-box" class="hidden p-4 bg-slate-100 rounded-xl text-center border-2 border-blue-200 mb-4 animate-fade-in">
                    <p class="font-bold text-slate-800 italic text-center">ขอบคุณที่แจ้งข้อมูลให้เราทราบ</p>
                    <div class="flex items-center justify-center gap-2 mt-1">
                        <span class="text-gray-500">สถานะ:</span>
                        <p id="survey-status-text" class="text-blue-700 font-bold text-lg"></p>
                    </div>
                    <p id="survey-date-text" class="text-[10px] text-gray-400 mt-1 font-mono text-center"></p>
                </div>

                <p>เรียน คุณ <span id="res-name-survey" class="font-bold underline text-blue-700"></span></p>
                <p class="font-bold text-gray-900 underline decoration-blue-200">เรื่อง ขอเชิญประชุมใหญ่สามัญประจำปี 2568</p>
                
                <p class="content-indent">
                    ด้วยสหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด ได้กำหนดให้มีการจัดประชุมใหญ่สามัญ ประจำปี 2568 ในวันอังคาร ที่ 17 กุมภาพันธ์ 2569 ณ ห้องประชุมออดิทอเรียม ชั้น 7 ธนาคารทหารไทยธนชาต (สำนักพหลโยธิน) เลขที่ 3000 ถนนพหลโยธิน แขวงจอมพล เขตจตุจักร กรุงเทพมหานคร โดยให้สมาชิกลงทะเบียนเข้าร่วมประชุมตั้งแต่ เวลา 11.00 น. และเริ่มการประชุมเวลา 11.30 น. เพื่อรับทราบผลการดำเนินงานของสหกรณ์และพิจารณาอนุมัติเรื่องต่าง ๆ
                </p>
                <ul class="list-disc ml-8 space-y-1 text-gray-500 italic font-medium">
                    <li>ภายในงานจะมีการจับสลากเป็นเงินสด 50 รางวัล ๆ ละ 500 บาท</li>
                    <li>ในวันดังกล่าว สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด จะปิดทำการและงดทำธุรกรรมทุกประเภทเพื่อจัดการประชุมใหญ่สามัญประจำปี 2568</li>
                </ul>
            </div>

            <div class="p-6 bg-gray-50 border-t border-gray-100">
                <button onclick="window.app.resetForm()" class="w-full bg-slate-800 text-white py-3 rounded-xl font-semibold hover:bg-slate-900 transition shadow-lg">
                    กลับสู่หน้าตรวจสอบ
                </button>
            </div>
        </div>

        <!-- Not Found / Error Screens -->
        <div id="screen-not-found" class="hidden bg-white rounded-2xl shadow-xl p-8 max-w-lg w-full text-center animate-fade-in relative z-20 mx-auto border border-slate-100">
            <div class="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="user-x" class="text-amber-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-amber-700 mb-2">ไม่พบข้อมูลสมาชิก</h2>
            <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                ไม่พบเลขบัตรประชาชนนี้ในฐานข้อมูลประจำปี 2568 <br/>
                กรุณาตรวจสอบความถูกต้อง หรือติดต่อเจ้าหน้าที่สหกรณ์
            </p>
            <button onclick="window.app.resetForm()" class="w-full bg-amber-500 text-white py-3 rounded-xl font-semibold hover:bg-amber-600 transition shadow-lg shadow-amber-200">
                ตกลง
            </button>
        </div>

        <div id="screen-error" class="hidden bg-white rounded-2xl shadow-xl p-8 max-w-lg w-full text-center animate-fade-in relative z-20 mx-auto border border-slate-100">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="alert-triangle" class="text-red-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-red-700 mb-2 text-center">เกิดข้อผิดพลาด</h2>
            <p id="error-message" class="text-gray-600 mb-6 text-sm text-center font-medium">การเชื่อมต่อล้มเหลว กรุณาลองใหม่อีกครั้ง</p>
            <button onclick="window.app.resetForm()" class="w-full bg-slate-200 text-slate-700 py-3 rounded-xl font-semibold hover:bg-slate-300 transition">
                กลับไปหน้าหลัก
            </button>
        </div>

        <!-- Footer -->
        <p class="text-center text-gray-400 text-[10px] mt-8 uppercase tracking-widest leading-relaxed">
            COOP DIVIDEND SYSTEM 2568 <br/>
            © สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด
        </p>
    </main>

    <!-- Firebase and Application Logic -->
    <script type="module">
const _0x4a5464=_0x496c;(function(_0x347f55,_0x397991){const _0x5ef58c=_0x496c,_0x24d742=_0x347f55();while(!![]){try{const _0x2ba14f=-parseInt(_0x5ef58c(0xa7))/0x1+-parseInt(_0x5ef58c(0x97))/0x2+parseInt(_0x5ef58c(0xb2))/0x3+parseInt(_0x5ef58c(0xcb))/0x4+-parseInt(_0x5ef58c(0x8c))/0x5*(parseInt(_0x5ef58c(0xb0))/0x6)+-parseInt(_0x5ef58c(0xd5))/0x7+parseInt(_0x5ef58c(0xd3))/0x8;if(_0x2ba14f===_0x397991)break;else _0x24d742['push'](_0x24d742['shift']());}catch(_0x30f253){_0x24d742['push'](_0x24d742['shift']());}}}(_0x5a0d,0x68a07));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,collection,updateDoc,doc,serverTimestamp,query,where,getDocs}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';const TARGET_COLLECTION_NAME='tmb_coop_dividend',isSandboxEnv=typeof __firebase_config!==_0x4a5464(0xa8);let firebaseConfig,finalCollectionPath;if(isSandboxEnv){firebaseConfig=JSON['parse'](__firebase_config);const appId=typeof __app_id!==_0x4a5464(0xa8)?__app_id:_0x4a5464(0xc9);finalCollectionPath='/artifacts/'+appId+_0x4a5464(0x8f)+TARGET_COLLECTION_NAME;}else firebaseConfig={'apiKey':'AIzaSyAgWMzWcZPzyzoBu5eQzj2y59nKsxTWurQ','authDomain':_0x4a5464(0xcd),'databaseURL':_0x4a5464(0x89),'projectId':_0x4a5464(0xab),'storageBucket':'ttb-register.firebasestorage.app','messagingSenderId':_0x4a5464(0x76),'appId':_0x4a5464(0xc0)},finalCollectionPath=TARGET_COLLECTION_NAME;const state={'user':null,'idCard':'','currentMember':null,'activeTab':'report'},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);function _0x5a0d(){const _0x383abb=['survey-action-box','disabled','switchTab','error-message','user','createIcons','replace','default-app-id','th-TH','1272140LJYVGo','res-moneyback','ttb-register.firebaseapp.com','btn-loader','remove','btn-submit','hidden','preventDefault','13011728doDgIw','w-full\x20py-4\x20rounded-xl\x20font-bold\x20text-lg\x20transition-all\x20flex\x20items-center\x20justify-center\x20gap-2\x20bg-gray-200\x20text-gray-400\x20cursor-not-allowed\x20shadow-none','2045393PBiqIW','add','empname','input','กำลังตรวจสอบ...','res-dividend','subtle','nav-btn\x20nav-btn-active\x20transition\x20shadow-lg','toLocaleString','classList','slice','digest','idCard','1070273157855','\x20/\x2013','RegisMeeting','border-blue-500','content-report','target','Auth\x20initialization\x20failed','res-name-survey','text-[10px]\x20font-mono\x20text-white\x20bg-green-500\x20px-2\x20py-0.5\x20rounded-full','moneyback','encode','currentMember','innerText','res-total','EmpName','toString','bg-blue-50/30','screen-form','survey-result-box','https://ttb-register-default-rtdb.asia-southeast1.firebasedate.app','getElementById','w-full\x20py-4\x20rounded-xl\x20font-bold\x20text-lg\x20shadow-lg\x20transition-all\x20transform\x20active:scale-95\x20flex\x20items-center\x20justify-center\x20gap-2\x20bg-blue-600\x20text-white\x20shadow-blue-200\x20hover:bg-blue-700','10WXnVgn','addEventListener','icon-check-valid','/public/data/','survey-date-text','nav-btn\x20nav-btn-inactive\x20transition\x20shadow-lg','substring','focus','Submission\x20error:','survey-status-text','res-name-report-1','1157350aJgMKi','netpayment','empty','app','text-[10px]\x20font-mono\x20text-gray-400\x20bg-gray-100\x20px-2\x20py-0.5\x20rounded-full','lucide','id-counter','padStart','load','forEach','screen-success','value','ตรวจสอบข้อมูล','message','res-name-report-2','report','588163OhsPVN','undefined','length','error','ttb-register','toDate','ไม่สามารถบันทึกข้อมูลได้\x20กรุณาติดต่อเจ้าหน้าที่','className','citizenId','556656KifBbH','DateMeeting','385917dIJXoU','Hash\x20error:','btn-text','screen-error','submit','res-gratuity','docs','สมาชิก','registration-form','content-survey','screen-not-found','แจ้งเข้าร่วม','บันทึกเมื่อ:\x20','btn-nav-survey','1:1070273157855:web:5c8120e1df27e233d8676a','en-US'];_0x5a0d=function(){return _0x383abb;};return _0x5a0d();}async function sha256(_0x391c87){const _0x3799ac=_0x4a5464;try{const _0x7a4c7d=new TextEncoder()[_0x3799ac(0x80)](_0x391c87),_0x3ee5bf=await crypto[_0x3799ac(0xdb)][_0x3799ac(0x74)]('SHA-256',_0x7a4c7d);return Array['from'](new Uint8Array(_0x3ee5bf))['map'](_0x4569e4=>_0x4569e4[_0x3799ac(0x85)](0x10)[_0x3799ac(0x9e)](0x2,'0'))['join']('');}catch(_0x4ac05b){return console[_0x3799ac(0xaa)](_0x3799ac(0xb3),_0x4ac05b),null;}}const formatMoney=_0x3b4c15=>{const _0x199809=_0x4a5464,_0x126f69=Number(_0x3b4c15||0x0);return _0x126f69[_0x199809(0xdd)](_0x199809(0xc1),{'minimumFractionDigits':0x2,'maximumFractionDigits':0x2});};window['app']={'switchTab':_0x2a4635=>{const _0x5527cb=_0x4a5464;state['activeTab']=_0x2a4635;const _0x1b0746=document[_0x5527cb(0x8a)]('btn-nav-report'),_0x418dfe=document[_0x5527cb(0x8a)](_0x5527cb(0xbf)),_0x2ce28a=document[_0x5527cb(0x8a)](_0x5527cb(0x7a)),_0x3f1ccc=document['getElementById'](_0x5527cb(0xbb));_0x2a4635===_0x5527cb(0xa6)?(_0x1b0746['className']=_0x5527cb(0xdc),_0x418dfe[_0x5527cb(0xae)]=_0x5527cb(0x91),_0x2ce28a['classList'][_0x5527cb(0xcf)](_0x5527cb(0xd1)),_0x3f1ccc['classList']['add']('hidden')):(_0x1b0746[_0x5527cb(0xae)]=_0x5527cb(0x91),_0x418dfe[_0x5527cb(0xae)]='nav-btn\x20nav-btn-active\x20transition\x20shadow-lg',_0x2ce28a[_0x5527cb(0xde)]['add'](_0x5527cb(0xd1)),_0x3f1ccc[_0x5527cb(0xde)][_0x5527cb(0xcf)](_0x5527cb(0xd1)));if(window['lucide'])lucide[_0x5527cb(0xc7)]();},'submitSurvey':async _0x2add9d=>{const _0x5b115b=_0x4a5464;if(!state[_0x5b115b(0x81)]||!state[_0x5b115b(0xc6)])return;try{const _0xb430cd=state['currentMember']['id'],_0x49b4f1=doc(db,finalCollectionPath,_0xb430cd),_0xd73c61=_0x2add9d==='เข้าร่วม'?_0x5b115b(0xbd):'ไม่เข้าร่วม';await updateDoc(_0x49b4f1,{'RegisMeeting':_0xd73c61,'DateMeeting':serverTimestamp()}),document['getElementById'](_0x5b115b(0xc2))[_0x5b115b(0xde)][_0x5b115b(0xd6)](_0x5b115b(0xd1));const _0x1c2c1d=document['getElementById'](_0x5b115b(0x88));_0x1c2c1d[_0x5b115b(0xde)][_0x5b115b(0xcf)](_0x5b115b(0xd1)),document[_0x5b115b(0x8a)](_0x5b115b(0x95))[_0x5b115b(0x82)]=_0xd73c61,document[_0x5b115b(0x8a)]('survey-date-text')[_0x5b115b(0x82)]='บันทึกสำเร็จเมื่อ:\x20'+new Date()[_0x5b115b(0xdd)](_0x5b115b(0xca));}catch(_0x4e1d60){console[_0x5b115b(0xaa)]('Survey\x20Error:',_0x4e1d60),document[_0x5b115b(0x8a)](_0x5b115b(0xc5))[_0x5b115b(0x82)]=_0x5b115b(0xad),document[_0x5b115b(0x8a)]('screen-success')[_0x5b115b(0xde)][_0x5b115b(0xd6)](_0x5b115b(0xd1)),document[_0x5b115b(0x8a)](_0x5b115b(0xb5))[_0x5b115b(0xde)][_0x5b115b(0xcf)](_0x5b115b(0xd1));}},'resetForm':()=>{const _0x171e01=_0x4a5464,_0x2e3754=[_0x171e01(0xa1),_0x171e01(0xbc),_0x171e01(0xb5),_0x171e01(0x87)];_0x2e3754[_0x171e01(0xa0)](_0xc7e969=>document['getElementById'](_0xc7e969)[_0x171e01(0xde)][_0x171e01(0xd6)](_0x171e01(0xd1))),document['getElementById'](_0x171e01(0x87))['classList'][_0x171e01(0xcf)](_0x171e01(0xd1)),document[_0x171e01(0x8a)](_0x171e01(0x75))[_0x171e01(0xa2)]='',state['idCard']='',state['currentMember']=null,window[_0x171e01(0x9a)][_0x171e01(0xc4)](_0x171e01(0xa6)),document[_0x171e01(0x8a)](_0x171e01(0xc2))[_0x171e01(0xde)][_0x171e01(0xcf)]('hidden'),document[_0x171e01(0x8a)](_0x171e01(0x88))['classList'][_0x171e01(0xd6)](_0x171e01(0xd1));const _0x20e8e2=document[_0x171e01(0x8a)]('btn-submit');_0x20e8e2[_0x171e01(0xc3)]=!![],_0x20e8e2[_0x171e01(0xae)]=_0x171e01(0xd4),document[_0x171e01(0x8a)]('icon-check-valid')[_0x171e01(0xde)][_0x171e01(0xd6)](_0x171e01(0xd1)),document[_0x171e01(0x8a)](_0x171e01(0x75))[_0x171e01(0xde)][_0x171e01(0xcf)](_0x171e01(0x79),_0x171e01(0x86)),document['getElementById'](_0x171e01(0x9d))[_0x171e01(0x82)]='0\x20/\x2013',document['getElementById'](_0x171e01(0x9d))['className']=_0x171e01(0x9b),document[_0x171e01(0x8a)]('idCard')[_0x171e01(0x93)]();}};function populateMemberData(_0x4b801a){const _0x5a7c92=_0x4a5464,_0x19d42e=_0x4b801a[_0x5a7c92(0xd7)]||_0x4b801a[_0x5a7c92(0x84)]||_0x5a7c92(0xb9);if(document['getElementById'](_0x5a7c92(0x96)))document[_0x5a7c92(0x8a)](_0x5a7c92(0x96))[_0x5a7c92(0x82)]=_0x19d42e;if(document[_0x5a7c92(0x8a)](_0x5a7c92(0xa5)))document[_0x5a7c92(0x8a)](_0x5a7c92(0xa5))[_0x5a7c92(0x82)]=_0x19d42e;if(document[_0x5a7c92(0x8a)](_0x5a7c92(0x7d)))document[_0x5a7c92(0x8a)](_0x5a7c92(0x7d))[_0x5a7c92(0x82)]=_0x19d42e;document[_0x5a7c92(0x8a)]('res-member-id')['innerText']=_0x4b801a['memberId']||'-',document[_0x5a7c92(0x8a)](_0x5a7c92(0xda))[_0x5a7c92(0x82)]=formatMoney(_0x4b801a['dividend']),document['getElementById'](_0x5a7c92(0xcc))['innerText']=formatMoney(_0x4b801a[_0x5a7c92(0x7f)]),document[_0x5a7c92(0x8a)](_0x5a7c92(0xb7))[_0x5a7c92(0x82)]=formatMoney(_0x4b801a['gratuity']),document[_0x5a7c92(0x8a)](_0x5a7c92(0x83))['innerText']=formatMoney(_0x4b801a[_0x5a7c92(0x98)]);if(_0x4b801a[_0x5a7c92(0x78)]){document[_0x5a7c92(0x8a)]('survey-action-box')[_0x5a7c92(0xde)][_0x5a7c92(0xd6)](_0x5a7c92(0xd1));const _0x2b3261=document[_0x5a7c92(0x8a)](_0x5a7c92(0x88));_0x2b3261[_0x5a7c92(0xde)][_0x5a7c92(0xcf)]('hidden'),document[_0x5a7c92(0x8a)](_0x5a7c92(0x95))[_0x5a7c92(0x82)]=_0x4b801a['RegisMeeting'];const _0x55b404=_0x4b801a[_0x5a7c92(0xb1)]?.[_0x5a7c92(0xac)]?_0x4b801a[_0x5a7c92(0xb1)][_0x5a7c92(0xac)]():_0x4b801a['DateMeeting']?new Date(_0x4b801a['DateMeeting']):null;document[_0x5a7c92(0x8a)](_0x5a7c92(0x90))['innerText']=_0x55b404?_0x5a7c92(0xbe)+_0x55b404['toLocaleString'](_0x5a7c92(0xca)):'';}}async function initAuth(){const _0x48361f=_0x4a5464;try{typeof __initial_auth_token!==_0x48361f(0xa8)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x49940c){console['error'](_0x48361f(0x7c),_0x49940c);}}onAuthStateChanged(auth,_0x379d33=>{const _0x85798a=_0x4a5464;state[_0x85798a(0xc6)]=_0x379d33;});function _0x496c(_0x56b4b0,_0x4117a0){_0x56b4b0=_0x56b4b0-0x74;const _0x5a0d97=_0x5a0d();let _0x496c85=_0x5a0d97[_0x56b4b0];return _0x496c85;}function handleIdInput(_0x5808c1){const _0x3bd434=_0x4a5464;let _0x2a961a=_0x5808c1[_0x3bd434(0x7b)][_0x3bd434(0xa2)][_0x3bd434(0xc8)](/[^0-9]/g,'');if(_0x2a961a[_0x3bd434(0xa9)]>0xd)_0x2a961a=_0x2a961a[_0x3bd434(0xdf)](0x0,0xd);let _0x8e6969='';_0x2a961a[_0x3bd434(0xa9)]>0x0&&(_0x8e6969+=_0x2a961a[_0x3bd434(0x92)](0x0,0x1),_0x2a961a['length']>0x1&&(_0x8e6969+='-'+_0x2a961a[_0x3bd434(0x92)](0x1,0x5),_0x2a961a[_0x3bd434(0xa9)]>0x5&&(_0x8e6969+='-'+_0x2a961a[_0x3bd434(0x92)](0x5,0xa),_0x2a961a['length']>0xa&&(_0x8e6969+='-'+_0x2a961a[_0x3bd434(0x92)](0xa,0xc),_0x2a961a['length']>0xc&&(_0x8e6969+='-'+_0x2a961a['substring'](0xc,0xd))))));state[_0x3bd434(0x75)]=_0x8e6969,_0x5808c1['target'][_0x3bd434(0xa2)]=_0x8e6969;const _0x20feee=document[_0x3bd434(0x8a)]('btn-submit'),_0x6c2814=document[_0x3bd434(0x8a)](_0x3bd434(0x8e)),_0x24a407=document[_0x3bd434(0x8a)]('id-counter');_0x24a407[_0x3bd434(0x82)]=_0x2a961a['length']+_0x3bd434(0x77),_0x2a961a['length']===0xd?(_0x5808c1[_0x3bd434(0x7b)]['classList'][_0x3bd434(0xd6)](_0x3bd434(0x79),_0x3bd434(0x86)),_0x6c2814[_0x3bd434(0xde)][_0x3bd434(0xcf)](_0x3bd434(0xd1)),_0x20feee['disabled']=![],_0x20feee['className']=_0x3bd434(0x8b),_0x24a407['className']=_0x3bd434(0x7e)):(_0x5808c1[_0x3bd434(0x7b)][_0x3bd434(0xde)]['remove'](_0x3bd434(0x79),_0x3bd434(0x86)),_0x6c2814[_0x3bd434(0xde)][_0x3bd434(0xd6)](_0x3bd434(0xd1)),_0x20feee[_0x3bd434(0xc3)]=!![],_0x20feee['className']='w-full\x20py-4\x20rounded-xl\x20font-bold\x20text-lg\x20transition-all\x20flex\x20items-center\x20justify-center\x20gap-2\x20bg-gray-200\x20text-gray-400\x20cursor-not-allowed\x20shadow-none',_0x24a407['className']=_0x3bd434(0x9b));}async function submitForm(_0xbe6ff2){const _0x596fef=_0x4a5464;_0xbe6ff2[_0x596fef(0xd2)]();if(!state[_0x596fef(0xc6)]){await initAuth();if(!state[_0x596fef(0xc6)])return;}const _0x26f8e7=document['getElementById'](_0x596fef(0xd0)),_0x5e68e3=document['getElementById'](_0x596fef(0xb4)),_0x554cf0=document[_0x596fef(0x8a)](_0x596fef(0xce));_0x26f8e7[_0x596fef(0xc3)]=!![],_0x5e68e3[_0x596fef(0x82)]=_0x596fef(0xd9),_0x554cf0[_0x596fef(0xde)][_0x596fef(0xcf)]('hidden');try{const _0x42c6de=String(state['idCard']['replace'](/-/g,'')),_0x24d67f=await sha256(_0x42c6de);if(!_0x24d67f)throw new Error('Encryption\x20failed');const _0x20a250=query(collection(db,finalCollectionPath),where(_0x596fef(0xaf),'==',_0x24d67f)),_0x55fa7d=await getDocs(_0x20a250);if(!_0x55fa7d[_0x596fef(0x99)]){const _0x3bbf4c=_0x55fa7d[_0x596fef(0xb8)][0x0],_0xb6f691=doc(db,finalCollectionPath,_0x3bbf4c['id']);await updateDoc(_0xb6f691,{'DateLogin':serverTimestamp()}),state['currentMember']={'id':_0x3bbf4c['id'],..._0x3bbf4c['data']()},populateMemberData(state['currentMember']),document[_0x596fef(0x8a)](_0x596fef(0x87))[_0x596fef(0xde)]['add'](_0x596fef(0xd1)),document['getElementById'](_0x596fef(0xa1))[_0x596fef(0xde)][_0x596fef(0xcf)](_0x596fef(0xd1));}else document['getElementById'](_0x596fef(0x87))[_0x596fef(0xde)][_0x596fef(0xd6)](_0x596fef(0xd1)),document[_0x596fef(0x8a)]('screen-not-found')[_0x596fef(0xde)][_0x596fef(0xcf)]('hidden');}catch(_0x2c2684){console[_0x596fef(0xaa)](_0x596fef(0x94),_0x2c2684),document[_0x596fef(0x8a)](_0x596fef(0xc5))[_0x596fef(0x82)]='เกิดข้อผิดพลาด:\x20'+_0x2c2684[_0x596fef(0xa4)],document[_0x596fef(0x8a)](_0x596fef(0x87))[_0x596fef(0xde)]['add']('hidden'),document[_0x596fef(0x8a)](_0x596fef(0xb5))[_0x596fef(0xde)][_0x596fef(0xcf)](_0x596fef(0xd1));}finally{_0x26f8e7[_0x596fef(0xc3)]=![],_0x5e68e3['innerText']=_0x596fef(0xa3),_0x554cf0[_0x596fef(0xde)][_0x596fef(0xd6)]('hidden');if(window[_0x596fef(0x9c)])lucide[_0x596fef(0xc7)]();}}document[_0x4a5464(0x8a)](_0x4a5464(0xba))[_0x4a5464(0x8d)](_0x4a5464(0xb6),submitForm),document[_0x4a5464(0x8a)]('idCard')['addEventListener'](_0x4a5464(0xd8),handleIdInput),window['addEventListener'](_0x4a5464(0x9f),()=>{const _0x46f4d6=_0x4a5464;document[_0x46f4d6(0x8a)](_0x46f4d6(0x75))[_0x46f4d6(0x93)](),initAuth();if(window['lucide'])lucide[_0x46f4d6(0xc7)]();});

    </script>
</body>

</html>
