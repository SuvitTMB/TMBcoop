<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Font (Sarabun) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
        
        .content-indent { text-indent: 3rem; }
        .report-card { @apply bg-white rounded-2xl shadow-xl overflow-hidden animate-fade-in relative z-20 w-full max-w-lg mx-auto border border-slate-100; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-10">

    <!-- Header Section -->
    <div class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white p-6 rounded-b-[2.5rem] shadow-lg mb-8 relative overflow-hidden" style="height: 180px;">
        <div class="absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10">
            <i data-lucide="calculator" width="150" height="150"></i>
        </div>
        
        <div class="relative z-10 flex flex-col items-center">
            <div class="bg-white/20 p-3 rounded-full mb-3 backdrop-blur-sm">
                <i data-lucide="file-text" width="32" height="32" class="text-white"></i>
            </div>
            <h1 class="text-xl font-bold text-center">รายงานเงินปันผล ประจำปี 2568</h1>
            <p class="text-blue-100 text-sm mt-1 text-center font-light text-balance">สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</p>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="px-2 sm:px-4 max-w-lg mx-auto -mt-10">
        
        <!-- Search Form Screen -->
        <div id="screen-form" class="bg-white rounded-2xl shadow-xl p-6 border border-slate-100 relative z-20">
            <form id="registration-form" class="space-y-6 pt-2">
                <div class="text-center">
                    <div>
                        <label for="idCard" class="block text-sm font-semibold text-gray-700 mb-2">
                            เลขบัตรประจำตัวประชาชน
                        </label>
                        <div class="relative">
                            <input
                                type="text"
                                id="idCard"
                                placeholder="x-xxxx-xxxxx-xx-x"
                                class="w-full text-xl font-mono tracking-wide p-3 rounded-xl border-2 border-gray-200 bg-white focus:border-blue-400 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center"
                                inputmode="numeric"
                                maxlength="17"
                                autocomplete="off"
                            />
                            <i id="icon-check-valid" data-lucide="check-circle" class="hidden absolute right-4 top-1/2 transform -translate-y-1/2 text-green-500 w-6 h-6 animate-fade-in"></i>
                        </div>
                        <div class="flex justify-between items-center mt-2 px-1">
                            <p id="id-helper-text" class="text-xs text-gray-400 font-medium">กรุณากรอกตัวเลขให้ครบ 13 หลัก</p>
                            <div class="flex items-center gap-2">
                                <span class="text-[10px] text-gray-400 uppercase font-bold">จำนวน:</span>
                                <p id="id-counter" class="text-[10px] font-mono text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full">0 / 13</p>
                            </div>
                        </div>
                    </div>

                    <div class="p-3 bg-blue-50 text-blue-800 rounded-xl text-xs flex gap-3 items-start mt-6 text-left border border-blue-100 leading-relaxed">
                        <i data-lucide="info" class="w-5 h-5 shrink-0 text-blue-600"></i>
                        <span>แบบสำรวจการเข้าร่วมประชุมใหญ่สามัญประจำปี 2568 และประกาศจ่ายเงินปันผล สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด ประจำปี 2568</span>
                    </div>
                </div>

                <button
                    type="submit"
                    id="btn-submit"
                    disabled
                    class="w-full py-3 rounded-xl font-bold text-lg shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2 bg-gray-300 text-gray-500 cursor-not-allowed shadow-none"
                    style="margin-top:100px;">
                    <span id="btn-text">ตรวจสอบข้อมูล</span>
                    <i id="btn-loader" data-lucide="loader-2" class="hidden animate-spin"></i>
                </button>
            </form>
        </div>

        <!-- Result Screen -->
        <div id="screen-success" class="hidden report-card">
            
            <div class="p-6 space-y-4 text-sm text-gray-800 leading-relaxed overflow-y-auto max-h-[85vh]">
                <p style="margin-top:30px;">เรียน <span id="res-name-1" class="text-base font-bold underline text-blue-700"></span></p>
                <p class="font-bold text-gray-900 underline decoration-blue-200 text-base">เรื่อง ขอเชิญประชุมใหญ่สามัญประจำปี 2568</p>
                
                <div class="p-3 bg-slate-50 rounded-xl border border-slate-100 space-y-3">
                    <p class="content-indent">
                        ด้วยสหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด ได้กำหนดให้มีการจัดประชุมใหญ่สามัญ ประจำปี 2568 ใน<b>วันพฤหัสบดีที่ 12 กุมภาพันธ์ 2569</b> ณ ห้องประชุมออดิทอเรียม ชั้น 7 ธนาคารทหารไทยธนชาต (สำนักพหลโยธิน) เลขที่ 3000 ถนนพหลโยธิน แขวงจอมพล เขตจตุจักร กรุงเทพมหานคร 
                    </p>
                    <p>
                        โดยให้สมาชิกลงทะเบียนเข้าร่วมประชุมตั้งแต่ เวลา 11.00 น. และเริ่มการประชุมเวลา 11.30 น. เพื่อรับทราบผลการดำเนินงานของสหกรณ์และพิจารณาอนุมัติเรื่องต่าง ๆ โดยขอให้สมาชิกเตรียมบัตรประชาชนหรือสำเนาบัตรมาด้วย สำหรับใช้ลงทะเบียนเข้าร่วมประชุม
                    </p>
                </div>
                
                <ul class="list-disc ml-8 space-y-1 font-medium text-slate-700 italic">
                    <li>ภายในงานจะมีการจับสลากเป็นเงินสด 50 รางวัล ๆ ละ 500 บาท</li>
                    <li>ในวันดังกล่าว สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด จะปิดทำการและงดทำธุรกรรมทุกประเภทเพื่อจัดการประชุมใหญ่สามัญประจำปี 2568</li>
                </ul>

                <!-- ส่วนแจ้งความประสงค์การเข้าร่วมประชุม -->
                <div id="survey-section" class="py-4 border-y border-slate-100 my-4 space-y-4">
                    <p class="font-bold text-center text-blue-900 mb-2 bg-blue-50 py-2 rounded-lg border border-blue-100">แจ้งความประสงค์การเข้าร่วมประชุม</p>
                    
                    <div id="survey-action-box" class="grid grid-cols-2 gap-4">
                        <button onclick="window.app.submitSurvey('เข้าร่วม')" class="flex flex-col items-center justify-center p-3 rounded-xl border-2 border-green-400 bg-green-50 text-green-700 hover:border-green-500 hover:bg-green-500 transition-all font-bold shadow-sm active:scale-95 h-[80px]">
                            <!-- ปรับไอคอนเป็น 30x30 -->
                            <i data-lucide="check-circle" class="mb-1" width="30" height="30"></i>
                            <span class="text-[14px] text-center">ต้องการเข้าร่วมประชุม</span>
                        </button>
                        <button onclick="window.app.submitSurvey('ไม่เข้าร่วม')" class="flex flex-col items-center justify-center p-3 rounded-xl border-2 border-rose-400 bg-rose-50 text-rose-700 hover:border-rose-500 hover:bg-rose-500 transition-all font-bold shadow-sm active:scale-95 h-[80px]">
                            <!-- ปรับไอคอนเป็น 30x30 -->
                            <i data-lucide="x-circle" class="mb-1" width="30" height="30"></i>
                            <span class="text-[14px] text-center">ไม่เข้าร่วมประชุม</span>
                        </button>
                    </div>

                    <div id="survey-result-box" class="hidden p-3 bg-slate-100 rounded-xl text-center border-2 border-blue-200 animate-fade-in">
                        <p class="font-bold text-slate-800 italic text-center">ขอบคุณที่แจ้งข้อมูลให้เราทราบ</p>
                        <div class="flex items-center justify-center gap-2 mt-1">
                            <span class="text-gray-500 text-xs">สถานะ:</span>
                            <p id="survey-status-text" class="text-blue-700 font-bold text-base"></p>
                        </div>
                        <p id="survey-date-text" class="text-[10px] text-gray-400 mt-1 font-mono text-center"></p>
                    </div>
                </div>

                <p class="content-indent">
                    พร้อมนี้สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด จะประกาศจ่ายเงินปันผล ประจำปี 2568 ในอัตราร้อยละ <b>4.75</b> เงินเฉลี่ยคืนดอกเบี้ยเงินกู้อัตราร้อยละ <b>10.00</b> และเงินค่าสมนาคุณ <b>120</b> บาท ซึ่งสหกรณ์จะโอนเงินดังกล่าว หลังจากได้รับอนุมัติจากที่ประชุมใหญ่แล้ว ในวันที่ <b>12 กุมภาพันธ์ 2569</b>
                </p>

                <!-- Dividend Information Box -->
                <div class="bg-blue-50 p-5 rounded-2xl border border-blue-200 mt-6 shadow-sm">
                    <p class="font-bold text-blue-900 mb-2">โดย <span id="res-name-2" class="underline decoration-blue-400"></span> เลขที่สมาชิก <span id="res-member-id" class="font-mono italic"></span> จะได้รับเงิน ดังนี้</p>
                    
                    <div class="space-y-3 border-t border-blue-200 pt-4 mt-2">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">เงินปันผล:</span>
                            <div class="text-right font-bold text-blue-700 text-base"><span id="res-dividend">0.00</span> บาท</div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">เงินเฉลี่ยคืน:</span>
                            <div class="text-right font-bold text-blue-700 text-base"><span id="res-moneyback">0.00</span> บาท</div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">เงินค่าสมนาคุณ:</span>
                            <div class="text-right font-bold text-blue-700 text-base"><span id="res-gratuity">0.00</span> บาท</div>
                        </div>
                        <div class="flex justify-between items-center border-t border-blue-300 pt-3 mt-1">
                            <span class="text-blue-900 font-bold text-base">รวมสุทธิทั้งหมด:</span>
                            <div class="text-right font-bold text-blue-900 text-base"><span id="res-total">0.00</span> บาท</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-6 bg-gray-50 border-t border-gray-100">
                <button onclick="window.app.resetForm()" class="w-full bg-slate-800 text-white py-3 rounded-xl font-semibold hover:bg-slate-900 transition shadow-lg flex items-center justify-center gap-2">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i> ลงทะเบียนใหม่
                </button>
            </div>
        </div>

        <!-- Not Found / Error Screens -->
        <div id="screen-not-found" class="hidden bg-white rounded-2xl shadow-xl p-8 max-w-lg w-full text-center animate-fade-in relative z-20 mx-auto border border-slate-100">
            <div class="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="user-x" class="text-amber-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-amber-700 mb-2">ไม่พบข้อมูลสมาชิก</h2>
            <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                ไม่พบเลขบัตรประชาชนนี้ในฐานข้อมูลประจำปี 2568 <br/>
                กรุณาตรวจสอบความถูกต้อง หรือติดต่อเจ้าหน้าที่สหกรณ์
            </p>
            <button onclick="window.app.resetForm()" class="w-full bg-amber-500 text-white py-3 rounded-xl font-semibold hover:bg-amber-600 transition shadow-lg shadow-amber-200">
                ตกลง
            </button>
        </div>

        <div id="screen-error" class="hidden bg-white rounded-2xl shadow-xl p-8 max-w-lg w-full text-center animate-fade-in relative z-20 mx-auto border border-slate-100">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="alert-triangle" class="text-red-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-red-700 mb-2 text-center">เกิดข้อผิดพลาด</h2>
            <p id="error-message" class="text-gray-600 mb-6 text-sm text-center font-medium">การเชื่อมต่อล้มเหลว กรุณาลองใหม่อีกครั้ง</p>
            <button onclick="window.app.resetForm()" class="w-full bg-slate-200 text-slate-700 py-3 rounded-xl font-semibold hover:bg-slate-300 transition">
                กลับไปหน้าหลัก
            </button>
        </div>

        <!-- Footer -->
        <p class="text-center text-gray-400 text-xs mt-8">
            ระบบลงทะเบียนสมาชิกสหกรณ์ <br/>
            © 2026 สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด
        </p>
    </main>

    <!-- Firebase and Application Logic -->
    <script type="module">
const _0x43ebb0=_0x5c5a;(function(_0x5096c6,_0x135d13){const _0xcd1b37=_0x5c5a,_0x280b8f=_0x5096c6();while(!![]){try{const _0x11dc9a=parseInt(_0xcd1b37(0x1d6))/0x1+parseInt(_0xcd1b37(0x19a))/0x2*(parseInt(_0xcd1b37(0x1d0))/0x3)+-parseInt(_0xcd1b37(0x1a5))/0x4+-parseInt(_0xcd1b37(0x1ae))/0x5+-parseInt(_0xcd1b37(0x1e7))/0x6*(-parseInt(_0xcd1b37(0x1bc))/0x7)+-parseInt(_0xcd1b37(0x1b8))/0x8*(parseInt(_0xcd1b37(0x1bb))/0x9)+parseInt(_0xcd1b37(0x1ad))/0xa;if(_0x11dc9a===_0x135d13)break;else _0x280b8f['push'](_0x280b8f['shift']());}catch(_0x2c59e7){_0x280b8f['push'](_0x280b8f['shift']());}}}(_0x4250,0xbb94b));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,collection,updateDoc,doc,serverTimestamp,query,where,getDocs}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';const TARGET_COLLECTION_NAME=_0x43ebb0(0x1f6),isSandboxEnv=typeof __firebase_config!==_0x43ebb0(0x1d2);function _0x5c5a(_0xc48f8,_0x3d4fea){_0xc48f8=_0xc48f8-0x197;const _0x4250a4=_0x4250();let _0x5c5a70=_0x4250a4[_0xc48f8];return _0x5c5a70;}function _0x4250(){const _0x3b6ab1=['text-[10px]\x20font-mono\x20text-gray-400\x20bg-gray-100\x20px-2\x20py-0.5\x20rounded-full','message','user','survey-date-text','0\x20/\x2013','Submission\x20error:','createIcons','/artifacts/','slice','classList','6hYmAYR','Encryption\x20failed','error-message','add','docs','load','survey-result-box','ttb-register.firebaseapp.com','th-TH','getElementById','border-blue-500','1:1070273157855:web:5c8120e1df27e233d8676a','สมาชิก','focus','dividend','tmb_coop_dividend','target','memberId','toDate','addEventListener','value','subtle','Survey\x20Error:','Hash\x20error:','2yIPwig','className','map','w-full\x20py-4\x20rounded-xl\x20font-bold\x20text-lg\x20transition-all\x20flex\x20items-center\x20justify-center\x20gap-2\x20bg-gray-200\x20text-gray-400\x20cursor-not-allowed\x20shadow-none','/public/data/','idCard','currentMember','id-counter','bg-blue-50/30','innerText','res-total','5637128ZyypBH','กำลังตรวจสอบ...','remove','ttb-register','res-member-id','screen-form','btn-loader','disabled','7620210WUnwGY','582115cEceKp','default-app-id','btn-submit','parse','empty','ไม่เข้าร่วม','substring','moneyback','lucide','replace','17592WXpNKH','digest','survey-action-box','2493uaWIrC','3921043hMVrux','1070273157855','res-moneyback','ไม่สามารถบันทึกข้อมูลได้\x20กรุณาติดต่อเจ้าหน้าที่','DateMeeting','padStart','เข้าร่วม','AIzaSyAgWMzWcZPzyzoBu5eQzj2y59nKsxTWurQ','icon-check-valid','RegisMeeting','error','toLocaleString','res-gratuity','screen-error','https://ttb-register-default-rtdb.asia-southeast1.firebasedate.app','ตรวจสอบข้อมูล','บันทึกสำเร็จเมื่อ:\x20','screen-success','SHA-256','res-name-2','1235277JeglYX','screen-not-found','undefined','preventDefault','survey-status-text','hidden','1169230sFeKSK','toString','length','en-US','submit','forEach','registration-form'];_0x4250=function(){return _0x3b6ab1;};return _0x4250();}let firebaseConfig,finalCollectionPath;if(isSandboxEnv){firebaseConfig=JSON[_0x43ebb0(0x1b1)](__firebase_config);const appId=typeof __app_id!=='undefined'?__app_id:_0x43ebb0(0x1af);finalCollectionPath=_0x43ebb0(0x1e4)+appId+_0x43ebb0(0x19e)+TARGET_COLLECTION_NAME;}else firebaseConfig={'apiKey':_0x43ebb0(0x1c3),'authDomain':_0x43ebb0(0x1ee),'databaseURL':_0x43ebb0(0x1ca),'projectId':_0x43ebb0(0x1a8),'storageBucket':'ttb-register.firebasestorage.app','messagingSenderId':_0x43ebb0(0x1bd),'appId':_0x43ebb0(0x1f2)},finalCollectionPath=TARGET_COLLECTION_NAME;const state={'user':null,'idCard':'','currentMember':null},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);async function sha256(_0x3a9f63){const _0x8eaa4=_0x43ebb0;try{const _0x1c7996=new TextEncoder()['encode'](_0x3a9f63),_0x3cf1de=await crypto[_0x8eaa4(0x197)][_0x8eaa4(0x1b9)](_0x8eaa4(0x1ce),_0x1c7996);return Array['from'](new Uint8Array(_0x3cf1de))[_0x8eaa4(0x19c)](_0x2cd023=>_0x2cd023[_0x8eaa4(0x1d7)](0x10)[_0x8eaa4(0x1c1)](0x2,'0'))['join']('');}catch(_0x3cba23){return console[_0x8eaa4(0x1c6)](_0x8eaa4(0x199),_0x3cba23),null;}}const formatMoney=_0x288a15=>{const _0x56adb7=_0x43ebb0,_0x305f92=Number(_0x288a15||0x0);return _0x305f92[_0x56adb7(0x1c7)](_0x56adb7(0x1d9),{'minimumFractionDigits':0x2,'maximumFractionDigits':0x2});};window['app']={'submitSurvey':async _0x49c644=>{const _0x14f809=_0x43ebb0;if(!state['currentMember']||!state[_0x14f809(0x1df)])return;try{const _0x3183ca=state[_0x14f809(0x1a0)]['id'],_0x18b12a=doc(db,finalCollectionPath,_0x3183ca),_0x5a926d=_0x49c644===_0x14f809(0x1c2)?'แจ้งเข้าร่วม':_0x14f809(0x1b3);await updateDoc(_0x18b12a,{'RegisMeeting':_0x5a926d,'DateMeeting':serverTimestamp()}),document['getElementById'](_0x14f809(0x1ba))[_0x14f809(0x1e6)][_0x14f809(0x1ea)](_0x14f809(0x1d5));const _0x1f8487=document[_0x14f809(0x1f0)](_0x14f809(0x1ed));_0x1f8487[_0x14f809(0x1e6)][_0x14f809(0x1a7)](_0x14f809(0x1d5)),document[_0x14f809(0x1f0)](_0x14f809(0x1d4))[_0x14f809(0x1a3)]=_0x5a926d,document[_0x14f809(0x1f0)](_0x14f809(0x1e0))[_0x14f809(0x1a3)]=_0x14f809(0x1cc)+new Date()[_0x14f809(0x1c7)](_0x14f809(0x1ef));}catch(_0x1710ab){console[_0x14f809(0x1c6)](_0x14f809(0x198),_0x1710ab),document['getElementById'](_0x14f809(0x1e9))[_0x14f809(0x1a3)]=_0x14f809(0x1bf),document[_0x14f809(0x1f0)](_0x14f809(0x1cd))[_0x14f809(0x1e6)][_0x14f809(0x1ea)](_0x14f809(0x1d5)),document[_0x14f809(0x1f0)]('screen-error')['classList']['remove'](_0x14f809(0x1d5));}},'resetForm':()=>{const _0x26a4f2=_0x43ebb0,_0x397dbb=['screen-success','screen-not-found','screen-error','screen-form'];_0x397dbb[_0x26a4f2(0x1db)](_0x538e4b=>document[_0x26a4f2(0x1f0)](_0x538e4b)[_0x26a4f2(0x1e6)][_0x26a4f2(0x1ea)](_0x26a4f2(0x1d5))),document[_0x26a4f2(0x1f0)](_0x26a4f2(0x1aa))[_0x26a4f2(0x1e6)][_0x26a4f2(0x1a7)](_0x26a4f2(0x1d5)),document['getElementById'](_0x26a4f2(0x19f))[_0x26a4f2(0x1fb)]='',state[_0x26a4f2(0x19f)]='',state['currentMember']=null;const _0x3f766f=document[_0x26a4f2(0x1f0)](_0x26a4f2(0x1b0));_0x3f766f[_0x26a4f2(0x1ac)]=!![],_0x3f766f[_0x26a4f2(0x19b)]=_0x26a4f2(0x19d),document['getElementById'](_0x26a4f2(0x1c4))['classList'][_0x26a4f2(0x1ea)]('hidden'),document[_0x26a4f2(0x1f0)](_0x26a4f2(0x19f))['classList']['remove'](_0x26a4f2(0x1f1),_0x26a4f2(0x1a2)),document[_0x26a4f2(0x1f0)](_0x26a4f2(0x1a1))[_0x26a4f2(0x1a3)]=_0x26a4f2(0x1e1),document[_0x26a4f2(0x1f0)](_0x26a4f2(0x1a1))['className']=_0x26a4f2(0x1dd),document['getElementById'](_0x26a4f2(0x1ba))[_0x26a4f2(0x1e6)]['remove'](_0x26a4f2(0x1d5)),document[_0x26a4f2(0x1f0)](_0x26a4f2(0x1ed))[_0x26a4f2(0x1e6)][_0x26a4f2(0x1ea)](_0x26a4f2(0x1d5)),document[_0x26a4f2(0x1f0)](_0x26a4f2(0x19f))[_0x26a4f2(0x1f4)]();}};function populateMemberData(_0x1cb7db){const _0x3f8184=_0x43ebb0,_0x3371d1=_0x1cb7db['empname']||_0x1cb7db['EmpName']||_0x3f8184(0x1f3);document[_0x3f8184(0x1f0)]('res-name-1')['innerText']=_0x3371d1,document[_0x3f8184(0x1f0)](_0x3f8184(0x1cf))[_0x3f8184(0x1a3)]=_0x3371d1,document[_0x3f8184(0x1f0)](_0x3f8184(0x1a9))[_0x3f8184(0x1a3)]=_0x1cb7db[_0x3f8184(0x1f8)]||'-',document[_0x3f8184(0x1f0)]('res-dividend')[_0x3f8184(0x1a3)]=formatMoney(_0x1cb7db[_0x3f8184(0x1f5)]),document[_0x3f8184(0x1f0)](_0x3f8184(0x1be))[_0x3f8184(0x1a3)]=formatMoney(_0x1cb7db[_0x3f8184(0x1b5)]),document[_0x3f8184(0x1f0)](_0x3f8184(0x1c8))[_0x3f8184(0x1a3)]=formatMoney(_0x1cb7db['gratuity']),document[_0x3f8184(0x1f0)](_0x3f8184(0x1a4))[_0x3f8184(0x1a3)]=formatMoney(_0x1cb7db['netpayment']);if(_0x1cb7db[_0x3f8184(0x1c5)]){document['getElementById'](_0x3f8184(0x1ba))[_0x3f8184(0x1e6)][_0x3f8184(0x1ea)](_0x3f8184(0x1d5));const _0x526bba=document[_0x3f8184(0x1f0)](_0x3f8184(0x1ed));_0x526bba[_0x3f8184(0x1e6)]['remove'](_0x3f8184(0x1d5)),document['getElementById'](_0x3f8184(0x1d4))[_0x3f8184(0x1a3)]=_0x1cb7db[_0x3f8184(0x1c5)];const _0x21cb5b=_0x1cb7db[_0x3f8184(0x1c0)]?.[_0x3f8184(0x1f9)]?_0x1cb7db[_0x3f8184(0x1c0)][_0x3f8184(0x1f9)]():_0x1cb7db[_0x3f8184(0x1c0)]?new Date(_0x1cb7db['DateMeeting']):null;document[_0x3f8184(0x1f0)](_0x3f8184(0x1e0))[_0x3f8184(0x1a3)]=_0x21cb5b?'บันทึกเมื่อ:\x20'+_0x21cb5b[_0x3f8184(0x1c7)](_0x3f8184(0x1ef)):'';}}async function initAuth(){const _0x391d73=_0x43ebb0;try{typeof __initial_auth_token!=='undefined'&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x3f47ac){console[_0x391d73(0x1c6)]('Auth\x20init\x20failed',_0x3f47ac);}}onAuthStateChanged(auth,_0x2c01f0=>{const _0x258c61=_0x43ebb0;state[_0x258c61(0x1df)]=_0x2c01f0;});function handleIdInput(_0x38f005){const _0xb8c74e=_0x43ebb0;let _0xcc3cc7=_0x38f005[_0xb8c74e(0x1f7)][_0xb8c74e(0x1fb)][_0xb8c74e(0x1b7)](/[^0-9]/g,'');if(_0xcc3cc7[_0xb8c74e(0x1d8)]>0xd)_0xcc3cc7=_0xcc3cc7[_0xb8c74e(0x1e5)](0x0,0xd);let _0x25b9d8='';_0xcc3cc7[_0xb8c74e(0x1d8)]>0x0&&(_0x25b9d8+=_0xcc3cc7[_0xb8c74e(0x1b4)](0x0,0x1),_0xcc3cc7[_0xb8c74e(0x1d8)]>0x1&&(_0x25b9d8+='-'+_0xcc3cc7[_0xb8c74e(0x1b4)](0x1,0x5),_0xcc3cc7[_0xb8c74e(0x1d8)]>0x5&&(_0x25b9d8+='-'+_0xcc3cc7[_0xb8c74e(0x1b4)](0x5,0xa),_0xcc3cc7[_0xb8c74e(0x1d8)]>0xa&&(_0x25b9d8+='-'+_0xcc3cc7[_0xb8c74e(0x1b4)](0xa,0xc),_0xcc3cc7[_0xb8c74e(0x1d8)]>0xc&&(_0x25b9d8+='-'+_0xcc3cc7[_0xb8c74e(0x1b4)](0xc,0xd))))));state['idCard']=_0x25b9d8,_0x38f005[_0xb8c74e(0x1f7)][_0xb8c74e(0x1fb)]=_0x25b9d8;const _0xe65f24=document[_0xb8c74e(0x1f0)](_0xb8c74e(0x1b0)),_0x22a8bb=document['getElementById'](_0xb8c74e(0x1c4)),_0x4bce5e=document[_0xb8c74e(0x1f0)](_0xb8c74e(0x1a1));_0x4bce5e[_0xb8c74e(0x1a3)]=_0xcc3cc7[_0xb8c74e(0x1d8)]+'\x20/\x2013',_0xcc3cc7[_0xb8c74e(0x1d8)]===0xd?(_0x38f005[_0xb8c74e(0x1f7)][_0xb8c74e(0x1e6)]['add']('border-blue-500',_0xb8c74e(0x1a2)),_0x22a8bb[_0xb8c74e(0x1e6)][_0xb8c74e(0x1a7)](_0xb8c74e(0x1d5)),_0xe65f24[_0xb8c74e(0x1ac)]=![],_0xe65f24[_0xb8c74e(0x19b)]='w-full\x20py-3\x20rounded-xl\x20font-bold\x20text-lg\x20shadow-lg\x20transition-all\x20transform\x20active:scale-95\x20flex\x20items-center\x20justify-center\x20gap-2\x20bg-blue-600\x20text-white\x20shadow-blue-200\x20hover:bg-blue-700',_0x4bce5e[_0xb8c74e(0x19b)]='text-[10px]\x20font-mono\x20text-white\x20bg-green-500\x20px-2\x20py-0.5\x20rounded-full'):(_0x38f005[_0xb8c74e(0x1f7)]['classList'][_0xb8c74e(0x1a7)](_0xb8c74e(0x1f1),_0xb8c74e(0x1a2)),_0x22a8bb['classList']['add'](_0xb8c74e(0x1d5)),_0xe65f24[_0xb8c74e(0x1ac)]=!![],_0xe65f24[_0xb8c74e(0x19b)]='w-full\x20py-3\x20rounded-xl\x20font-bold\x20text-lg\x20transition-all\x20flex\x20items-center\x20justify-center\x20gap-2\x20bg-gray-200\x20text-gray-400\x20cursor-not-allowed\x20shadow-none',_0x4bce5e[_0xb8c74e(0x19b)]=_0xb8c74e(0x1dd));}async function submitForm(_0x5754dc){const _0x1a2540=_0x43ebb0;_0x5754dc[_0x1a2540(0x1d3)]();if(!state[_0x1a2540(0x1df)]){await initAuth();if(!state[_0x1a2540(0x1df)])return;}const _0x4f7ee3=document[_0x1a2540(0x1f0)](_0x1a2540(0x1b0)),_0x1e210c=document['getElementById']('btn-text'),_0x4a0479=document[_0x1a2540(0x1f0)](_0x1a2540(0x1ab));_0x4f7ee3[_0x1a2540(0x1ac)]=!![],_0x1e210c['innerText']=_0x1a2540(0x1a6),_0x4a0479[_0x1a2540(0x1e6)][_0x1a2540(0x1a7)](_0x1a2540(0x1d5));try{const _0x4adad7=String(state[_0x1a2540(0x19f)][_0x1a2540(0x1b7)](/-/g,'')),_0x2e8b2b=await sha256(_0x4adad7);if(!_0x2e8b2b)throw new Error(_0x1a2540(0x1e8));const _0x95b301=query(collection(db,finalCollectionPath),where('citizenId','==',_0x2e8b2b)),_0x221f5d=await getDocs(_0x95b301);if(!_0x221f5d[_0x1a2540(0x1b2)]){const _0x4b96a1=_0x221f5d[_0x1a2540(0x1eb)][0x0],_0x4ac1db=doc(db,finalCollectionPath,_0x4b96a1['id']);await updateDoc(_0x4ac1db,{'DateLogin':serverTimestamp()}),state['currentMember']={'id':_0x4b96a1['id'],..._0x4b96a1['data']()},populateMemberData(state[_0x1a2540(0x1a0)]),document['getElementById'](_0x1a2540(0x1aa))[_0x1a2540(0x1e6)][_0x1a2540(0x1ea)]('hidden'),document['getElementById'](_0x1a2540(0x1cd))[_0x1a2540(0x1e6)]['remove'](_0x1a2540(0x1d5));}else document['getElementById'](_0x1a2540(0x1aa))['classList'][_0x1a2540(0x1ea)](_0x1a2540(0x1d5)),document[_0x1a2540(0x1f0)](_0x1a2540(0x1d1))[_0x1a2540(0x1e6)]['remove']('hidden');}catch(_0x5ee757){console['error'](_0x1a2540(0x1e2),_0x5ee757),document[_0x1a2540(0x1f0)](_0x1a2540(0x1e9))[_0x1a2540(0x1a3)]='เกิดข้อผิดพลาด:\x20'+_0x5ee757[_0x1a2540(0x1de)],document[_0x1a2540(0x1f0)](_0x1a2540(0x1aa))['classList'][_0x1a2540(0x1ea)](_0x1a2540(0x1d5)),document['getElementById'](_0x1a2540(0x1c9))[_0x1a2540(0x1e6)][_0x1a2540(0x1a7)](_0x1a2540(0x1d5));}finally{_0x4f7ee3[_0x1a2540(0x1ac)]=![],_0x1e210c[_0x1a2540(0x1a3)]=_0x1a2540(0x1cb),_0x4a0479[_0x1a2540(0x1e6)]['add'](_0x1a2540(0x1d5));if(window[_0x1a2540(0x1b6)])lucide['createIcons']();}}document[_0x43ebb0(0x1f0)](_0x43ebb0(0x1dc))[_0x43ebb0(0x1fa)](_0x43ebb0(0x1da),submitForm),document[_0x43ebb0(0x1f0)](_0x43ebb0(0x19f))[_0x43ebb0(0x1fa)]('input',handleIdInput),window[_0x43ebb0(0x1fa)](_0x43ebb0(0x1ec),()=>{const _0x5a1dda=_0x43ebb0;document['getElementById']('idCard')[_0x5a1dda(0x1f4)](),initAuth();if(window[_0x5a1dda(0x1b6)])lucide[_0x5a1dda(0x1e3)]();});
    </script>
</body>
</html>

