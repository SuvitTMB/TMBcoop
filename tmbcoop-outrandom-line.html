<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ลงทะเบียนออกและลุ้นรางวัล - สหกรณ์ออมทรัพย์ฯ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Font (Sarabun) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Confetti for Lucky Draw -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .hidden { display: none !important; }
        /* Custom Animations */
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        .animate-bounce-slow { animation: bounce-slow 2s infinite; }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-10">

    <!-- Header Section -->
    <div class="bg-gradient-to-r from-purple-600 to-indigo-700 text-white p-6 rounded-b-[2.5rem] shadow-lg mb-8 relative overflow-hidden">
        <div class="absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10">
            <i data-lucide="gift" width="150" height="150"></i>
        </div>
        
        <div class="relative z-10 flex flex-col items-center">
            <div class="bg-white/20 p-3 rounded-full mb-3 backdrop-blur-sm">
                <i data-lucide="party-popper" width="32" height="32" class="text-white"></i>
            </div>
            <h1 class="text-xl font-bold text-center">กิจกรรมลุ้นรางวัล</h1>
            <p class="text-purple-100 text-sm mt-1">สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</p>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="px-2 sm:px-4 max-w-lg mx-auto -mt-10">
        
        <!-- Form Screen (Check-out first) -->
        <div id="screen-form" class="bg-white rounded-2xl shadow-xl p-6 border border-slate-100 relative z-20">
            <form id="registration-form" class="space-y-6 pt-2">
                <center>
                    <h2 class="text-lg font-bold text-gray-700 mb-4">ลงทะเบียนออกเพื่อลุ้นรางวัล</h2>
                    <div>
                        <label for="idCard" class="block text-sm font-semibold text-gray-700 mb-2">
                            เลขบัตรประจำตัวประชาชน
                        </label>
                        <div class="relative">
                            <input
                                type="text"
                                id="idCard"
                                placeholder="x-xxxx-xxxxx-xx-x"
                                class="w-full text-xl font-mono tracking-wide p-4 rounded-xl border-2 border-gray-200 bg-white focus:border-purple-400 focus:ring-4 focus:ring-purple-100 outline-none transition-all text-center"
                                inputmode="numeric"
                                maxlength="17"
                            />
                            <i id="icon-check-valid" data-lucide="check-circle" class="hidden absolute right-4 top-1/2 transform -translate-y-1/2 text-green-500 w-6 h-6 animate-fade-in"></i>
                        </div>
                        <p class="text-xs text-gray-400 mt-2 ml-1">กรุณากรอกตัวเลข 13 หลักให้ครบถ้วน</p>
                    </div>

                    <div class="p-3 bg-purple-50 text-purple-800 rounded-lg text-xs flex gap-2 items-start" style="margin-top:25px;">
                        <i data-lucide="shield-alert" class="w-4 h-4 shrink-0 mt-0.5"></i>
                        <span>ระบบจำกัดสิทธิ์ 1 เครื่อง / 1 ท่าน หากลงทะเบียนแล้วจะไม่สามารถเปลี่ยนเครื่องได้</span>
                    </div>
                </center>

                <button
                    type="submit"
                    id="btn-submit"
                    disabled
                    class="w-full py-3 rounded-lg font-semibold text-base shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2 bg-gray-200 text-gray-400 cursor-not-allowed shadow-none"
                >
                    <span id="btn-text">ลงทะเบียนออก</span>
                    <i id="btn-loader" data-lucide="loader-2" class="hidden animate-spin"></i>
                </button>
            </form>
        </div>

        <!-- Success Screen (Check-out Done & Reward Summary) -->
        <div id="screen-success" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="check-circle" class="text-green-600 w-10 h-10"></i>
            </div>
            
            <h2 id="success-title" class="text-xl font-bold text-gray-800 mb-4">ลงทะเบียนออกสำเร็จ</h2>
            
            <!-- Time Grid -->
            <div class="grid grid-cols-2 gap-3 mb-6">
                <div class="bg-blue-50 p-3 rounded-xl border border-blue-100 flex flex-col items-center justify-center">
                    <p class="text-xs font-bold text-blue-800 uppercase mb-1">ลงทะเบียนเข้า</p>
                    <p id="success-checkin-time" class="text-blue-600 font-mono text-sm font-semibold">--:--</p>
                </div>
                <div class="bg-orange-50 p-3 rounded-xl border border-orange-100 flex flex-col items-center justify-center">
                    <p class="text-xs font-bold text-orange-800 uppercase mb-1">ลงทะเบียนออก</p>
                    <p id="success-checkout-time" class="text-orange-600 font-mono text-sm font-semibold">--:--</p>
                </div>
            </div>
            
            <!-- Message Box (Will be hidden when reward exists) -->
            <div id="msg-box-recorded" class="bg-green-50 border border-green-100 rounded-xl p-5 mb-6 text-left shadow-sm">
                <h3 id="success-msg-header" class="font-bold text-green-900 mb-2 text-lg flex items-center gap-2">
                    <i data-lucide="calendar-check" width="20"></i> บันทึกเวลาเรียบร้อย
                </h3>
                <p id="success-msg-body" class="text-sm text-gray-700">
                    ท่านได้ลงทะเบียนออกและมีสิทธิ์ลุ้นรับรางวัลพิเศษจำนวน 50 รางวัล และขอให้ท่านเดินทางกลับโดยสวัสดิภาพ
                </p>
            </div>
            
            <!-- Lucky Draw Action Area -->
            <div id="lucky-draw-action-container">
                <!-- Case 1: Button for new draw -->
                <button id="btn-start-draw" onclick="window.app.goToLuckyDraw()" class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white py-4 rounded-xl font-bold shadow-lg shadow-orange-200 hover:shadow-orange-300 transform hover:-translate-y-1 transition-all flex items-center justify-center gap-2 text-lg animate-bounce-slow">
                    <i data-lucide="gift" width="24"></i> กดเพื่อสุ่มของรางวัล
                </button>

                <!-- Case 2: Display Reward (Already drawn) -->
                <div id="reward-display-badge" class="hidden w-full bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-300 rounded-xl p-4 text-center shadow-inner mb-4">
                    <p class="text-sm text-purple-600 font-semibold mb-1">ของรางวัลของคุณคือ</p>
                    <p id="reward-name-text" class="text-xl font-bold text-purple-800">...</p>
                </div>

                <!-- Case 3: Claim Button (Added for Summary Page) -->
                <div id="claim-section-summary" class="hidden">
                    <button id="btn-claim-reward-summary" onclick="window.app.claimReward('summary')" class="w-full bg-green-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:bg-green-700 transition transform hover:scale-105 mb-2">
                        <i data-lucide="check-square" class="inline-block w-5 h-5 mr-1 mb-1"></i> ยืนยันการรับรางวัลแล้ว
                    </button>
                    <p id="text-claim-time-summary" class="text-xs text-gray-600 font-sm bg-green-50 p-3 rounded-lg border border-green-200 hidden">
                        <i data-lucide="clock" class="inline-block w-4 h-4 mr-1"></i> รับรางวัลเมื่อ: <span id="claim-time-val-summary"></span>
                    </p>
                </div>
            </div>

            <!-- Back to Registration Button -->
            <button onclick="window.app.resetForm()" class="mt-6 w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition flex items-center justify-center gap-2">
                <i data-lucide="log-out" width="18"></i> กลับสู่หน้าลงทะเบียน
            </button>
        </div>

        <!-- Lucky Draw Screen (Spinning & Result) -->
        <div id="screen-luckydraw" class="hidden bg-white rounded-2xl shadow-xl p-6 w-full text-center animate-fade-in relative z-20 min-h-[400px] flex flex-col items-center justify-center">
            
            <!-- State 1: Validating -->
            <div id="draw-state-validating" class="w-full">
                <div class="w-24 h-24 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse">
                    <i data-lucide="scan-face" class="text-blue-500 w-12 h-12"></i>
                </div>
                <h2 class="text-xl font-bold text-gray-800 mb-2">กำลังตรวจสอบข้อมูลพนักงาน...</h2>
                <p class="text-gray-500 text-sm">กรุณารอสักครู่ ระบบกำลังยืนยันสิทธิ์ของท่าน</p>
                <div class="mt-6 w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-200 overflow-hidden">
                    <div class="bg-blue-600 h-2.5 rounded-full" style="width: 0%; transition: width 2s ease-in-out;" id="validate-progress"></div>
                </div>
            </div>

            <!-- State 2: Spinning -->
            <div id="draw-state-spinning" class="hidden w-full">
                <div class="relative w-32 h-32 mx-auto mb-6">
                    <div class="absolute inset-0 border-4 border-t-purple-500 border-gray-200 rounded-full animate-spin"></div>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <i data-lucide="gift" class="text-purple-500 w-12 h-12"></i>
                    </div>
                </div>
                <h2 class="text-2xl font-bold text-purple-700 mb-2" id="spin-text">กำลังสุ่มรางวัล...</h2>
                <div class="h-8 overflow-hidden relative mt-2">
                    <div id="prize-ticker" class="text-gray-400 text-lg transition-all duration-100">...</div>
                </div>
            </div>

            <!-- State 3: Result -->
            <div id="draw-state-result" class="hidden w-full">
                <div class="mb-2" id="result-icon-container">
                    <i data-lucide="crown" width="60" height="60" class="mx-auto text-yellow-500"></i>
                </div>
                <h2 id="result-title" class="text-lg font-bold text-gray-500 mb-1">ยินดีด้วย! ท่านได้รับ</h2>
                <div id="result-card" class="bg-gradient-to-r from-yellow-100 to-orange-100 border-2 border-yellow-300 p-6 rounded-2xl mb-6 shadow-inner relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-2 opacity-20"><i data-lucide="sparkles" width="40"></i></div>
                    <h1 id="prize-result-name" class="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-600 to-red-600 drop-shadow-sm mb-4">
                        รอสักครู่...
                    </h1>
                </div>
                
                <!-- Claim Reward Section -->
                <div id="claim-section" class="mb-6">
                    <button id="btn-claim-reward" onclick="window.app.claimReward('result')" class="bg-green-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:bg-green-700 transition transform hover:scale-105 hidden">
                        <i data-lucide="check-square" class="inline-block w-5 h-5 mr-1 mb-1"></i> ยืนยันการรับรางวัลแล้ว
                    </button>
                    <p id="text-claim-time" class="text-green-700 font-medium bg-green-50 p-3 rounded-lg border border-green-200 hidden">
                        <i data-lucide="clock" class="inline-block w-4 h-4 mr-1"></i> รับรางวัลเมื่อ: <span id="claim-time-val" class="font-bold"></span>
                    </p>
                </div>

                <p id="result-footer-text" class="text-xs text-gray-400 mb-6">กรุณาให้เจ้าน้าที่ทำการกดปุ่มยืนยันการรับรางวัล</p>

                <button onclick="window.app.backToSummary()" class="w-full bg-gray-800 text-white py-3 rounded-xl font-semibold hover:bg-gray-900 transition">
                    กลับสู่หน้าหลัก (Check-out)
                </button>
            </div>

        </div>

        <!-- Error Screen -->
        <div id="screen-error-device" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="alert-triangle" class="text-red-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-red-700 mb-2">เกิดข้อผิดพลาด</h2>
            <p id="error-msg-text" class="text-gray-600 mb-6 text-sm">ไม่สามารถดำเนินการได้</p>
            <button onclick="window.location.reload()" class="w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition">ปิด</button>
        </div>

        <!-- Not Found Screen -->
        <div id="screen-not-found" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="user-x" class="text-amber-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-amber-700 mb-2">ไม่พบข้อมูล</h2>
            <p class="text-gray-600 mb-6 text-sm">กรุณาลงทะเบียนเข้าก่อนทำการลงทะเบียนออก</p>
            <button onclick="window.app.resetForm()" class="w-full bg-amber-500 text-white py-3 rounded-xl font-semibold hover:bg-amber-600 transition">ปิด</button>
        </div>

        <p class="text-center text-gray-400 text-xs mt-8">
            ระบบสุ่มรางวัลสมาชิกสหกรณ์ <br/>
            © 2024 สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด
        </p>
    </main>

    <script type="module">
const _0x384742=_0x3b19;(function(_0x365fc8,_0x5de481){const _0x4b6edc=_0x3b19,_0x22f8fa=_0x365fc8();while(!![]){try{const _0x1f438e=-parseInt(_0x4b6edc(0x26e))/0x1+parseInt(_0x4b6edc(0x283))/0x2*(-parseInt(_0x4b6edc(0x236))/0x3)+parseInt(_0x4b6edc(0x23b))/0x4+parseInt(_0x4b6edc(0x20c))/0x5+-parseInt(_0x4b6edc(0x218))/0x6*(-parseInt(_0x4b6edc(0x245))/0x7)+parseInt(_0x4b6edc(0x211))/0x8+-parseInt(_0x4b6edc(0x1fb))/0x9*(parseInt(_0x4b6edc(0x24f))/0xa);if(_0x1f438e===_0x5de481)break;else _0x22f8fa['push'](_0x22f8fa['shift']());}catch(_0x264731){_0x22f8fa['push'](_0x22f8fa['shift']());}}}(_0x5ded,0xa99f3));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js';import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js';import{getFirestore,collection,updateDoc,doc,serverTimestamp,query,where,getDocs,getDoc,addDoc,onSnapshot}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js';function _0x5ded(){const _0x335807=['tmb_coop','เกิดข้อผิดพลาด:\x20','innerText','currentReward','https://ttb-register-default-rtdb.asia-southeast1.firebasedate.app','text-gray-400','text-claim-time-summary','เครื่องใช้ไฟฟ้า','draw-state-spinning','innerHTML','ไม่พบข้อมูลผู้ใช้\x20กรุณาลงทะเบียนใหม่','load','to-pink-100','<i\x20data-lucide=\x22frown\x22\x20width=\x2260\x22\x20height=\x2260\x22\x20class=\x22mx-auto\x20text-gray-400\x22></i>','from-gray-100','4878rtOlpR','hover:bg-purple-700','coop_device_identifier','btn-loader','parse','bg-purple-600','to-orange-100','icon-check-valid','deviceId','replace','bg-gradient-to-r','error','เสียใจด้วย','status','ไม่ได้รับรางวัล','default-app-id','success-checkin-time','3355255IcVimL','slice','/public/data/','screen-form','summary','9489992ojaFtA','msg-box-recorded','userHash','ประวัติการสุ่มรางวัล','/public/data/coop_registrations','width','btn-claim-reward-summary','1647930YxFZyP','focus','text-purple-800','=([^;]+)','screen-success','value','from-purple-100','Fetch\x20Prizes\x20Error','checked-out','submit','success-checkout-time','1:1070273157855:web:5c8120e1df27e233d8676a','toString','screen-error-device','to-gray-200','ttb-register','bg-gray-200','กำลังตรวจสอบ...','artifacts/','app','result-footer-text','prize-ticker','error-msg-text','claim-section','CheckIN','docs','border-gray-200','ttb-register.firebasestorage.app','createIcons',';\x20path=/;\x20max-age=31536000','6CQsEmY','random','draw-state-result','idCard','floor','3789792GZlwZQ','prizesList','coop_registered_citizen_id','text-gray-500','user','รางวัลพิเศษ','resetForm','bg-clip-text','map','style','35OVKiaQ','setItem','SHA-256','input','กำลังบันทึก...','toLocaleString','เกิดข้อผิดพลาดในการตรวจสอบข้อมูล','50%','คุณไม่ได้รางวัล','shadow-purple-200','24010CYjrQz','length','undefined','(^|\x20)','screen-not-found','rewardClaimTime','bg-purple-50/30','Save\x20Prize\x20Error:','match','substr','text-white','remove','1070273157855','join','border-gray-300','empty','btn-start-draw','from-yellow-100','disabled','AIzaSyAgWMzWcZPzyzoBu5eQzj2y59nKsxTWurQ','cursor-not-allowed','reward','screen-luckydraw','registration-form','claim-section-summary','validate-progress','encode','เครื่องนี้ถูกผูกบัญชีอื่นแล้ว\x20(ไม่สามารถลงทะเบียนใหม่ได้)','text-gray-600','reward-name-text','data','1342196eVepwb','draw-state-validating','padStart','text-transparent','ลงทะเบียนออก','coop_gift','cookie','forEach','ทองคำ','add','DEV-','addEventListener','btn-claim-reward','getElementById','target','push','อุปกรณ์นี้ได้ทำการลงทะเบียนให้กับหมายเลขบัตรประชาชนอื่นไปแล้ว\x20ไม่สามารถลงทะเบียนซ้ำได้\x20(Local\x20Lock)','text-claim-time','result-icon-container','CheckOUT','shadow-none','839714ehNDdu','classList','claim-time-val-summary','hidden','to-red-600','border-purple-500','border-yellow-300','G-9DJLWJ5LQ1','บันทึกการรับรางวัลไม่สำเร็จ\x20กรุณาลองใหม่','ยินดีด้วย!\x20ท่านได้รับ','name','querySelector','th-TH','toDate','currentDocId','รหัสบัตรประชาชนนี้\x20ผูกกับโทรศัพท์เครื่องอื่นแล้ว<br>(ไม่สามารถเปลี่ยนเครื่องได้)','exists','lucide','result-card','btn-text'];_0x5ded=function(){return _0x335807;};return _0x5ded();}const TARGET_COLLECTION_NAME=_0x384742(0x297),PRIZES_COLLECTION_NAME=_0x384742(0x273),isSandboxEnv=typeof __firebase_config!==_0x384742(0x251);let firebaseConfig,finalCollectionPath,prizesCollectionPath;if(isSandboxEnv){firebaseConfig=JSON[_0x384742(0x1ff)](__firebase_config);const appId=typeof __app_id!==_0x384742(0x251)?__app_id:_0x384742(0x20a);finalCollectionPath=_0x384742(0x22a)+appId+_0x384742(0x215),prizesCollectionPath='artifacts/'+appId+_0x384742(0x20e)+PRIZES_COLLECTION_NAME;}else firebaseConfig={'apiKey':_0x384742(0x262),'authDomain':'ttb-register.firebaseapp.com','databaseURL':_0x384742(0x29b),'projectId':_0x384742(0x227),'storageBucket':_0x384742(0x233),'messagingSenderId':_0x384742(0x25b),'appId':_0x384742(0x223),'measurementId':_0x384742(0x28a)},finalCollectionPath=TARGET_COLLECTION_NAME,prizesCollectionPath=PRIZES_COLLECTION_NAME;const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),state={'user':null,'idCard':'','currentDocId':null,'userHash':null,'currentReward':null,'prizesList':[]};async function sha256(_0x57d17e){const _0x1b53de=_0x384742,_0x29781f=new TextEncoder()[_0x1b53de(0x269)](_0x57d17e),_0x5c5ce2=await crypto['subtle']['digest'](_0x1b53de(0x247),_0x29781f),_0x409682=Array['from'](new Uint8Array(_0x5c5ce2));return _0x409682[_0x1b53de(0x243)](_0x38e4a6=>_0x38e4a6[_0x1b53de(0x224)](0x10)[_0x1b53de(0x270)](0x2,'0'))[_0x1b53de(0x25c)]('');}function getDeviceId(){const _0x482768=_0x384742,_0x405013=_0x482768(0x1fd);let _0x2bef4e=localStorage['getItem'](_0x405013);if(!_0x2bef4e){const _0xecdf2e=document[_0x482768(0x274)][_0x482768(0x257)](new RegExp(_0x482768(0x252)+_0x405013+_0x482768(0x21b)));_0xecdf2e&&(_0x2bef4e=_0xecdf2e[0x2],localStorage[_0x482768(0x246)](_0x405013,_0x2bef4e));}return!_0x2bef4e?(_0x2bef4e=_0x482768(0x278)+Date['now']()[_0x482768(0x224)](0x24)+Math['random']()[_0x482768(0x224)](0x24)[_0x482768(0x258)](0x2,0x9),localStorage[_0x482768(0x246)](_0x405013,_0x2bef4e),document[_0x482768(0x274)]=_0x405013+'='+_0x2bef4e+_0x482768(0x235)):document[_0x482768(0x274)]=_0x405013+'='+_0x2bef4e+';\x20path=/;\x20max-age=31536000',_0x2bef4e;}function _0x3b19(_0xadce2,_0xe15f76){_0xadce2=_0xadce2-0x1f4;const _0x5ded81=_0x5ded();let _0x3b1971=_0x5ded81[_0xadce2];return _0x3b1971;}function setLocalRegistration(_0x156c7c){const _0x2542ee=_0x384742;localStorage[_0x2542ee(0x246)](_0x2542ee(0x23d),_0x156c7c);}function getLocalRegistration(){const _0x1c1e8f=_0x384742;return localStorage['getItem'](_0x1c1e8f(0x23d));}window['app']={'resetForm':()=>{const _0x2d3169=_0x384742;[_0x2d3169(0x21c),_0x2d3169(0x225),_0x2d3169(0x253),_0x2d3169(0x265)][_0x2d3169(0x275)](_0x3ad7a3=>document['getElementById'](_0x3ad7a3)['classList'][_0x2d3169(0x277)](_0x2d3169(0x286))),document[_0x2d3169(0x27b)](_0x2d3169(0x20f))[_0x2d3169(0x284)][_0x2d3169(0x25a)](_0x2d3169(0x286)),document['getElementById'](_0x2d3169(0x239))[_0x2d3169(0x21d)]='',document[_0x2d3169(0x27b)]('icon-check-valid')[_0x2d3169(0x284)]['add'](_0x2d3169(0x286)),document[_0x2d3169(0x27b)](_0x2d3169(0x267))['classList'][_0x2d3169(0x277)](_0x2d3169(0x286)),document['getElementById']('msg-box-recorded')[_0x2d3169(0x284)][_0x2d3169(0x25a)](_0x2d3169(0x286));const _0x36f853=document[_0x2d3169(0x27b)]('btn-submit');_0x36f853[_0x2d3169(0x261)]=!![],_0x36f853[_0x2d3169(0x284)]['add'](_0x2d3169(0x228),'text-gray-400'),_0x36f853[_0x2d3169(0x284)][_0x2d3169(0x25a)](_0x2d3169(0x200),_0x2d3169(0x259)),document['getElementById'](_0x2d3169(0x296))[_0x2d3169(0x299)]=_0x2d3169(0x272),document[_0x2d3169(0x27b)](_0x2d3169(0x1fe))[_0x2d3169(0x284)][_0x2d3169(0x277)](_0x2d3169(0x286)),state[_0x2d3169(0x239)]='',state[_0x2d3169(0x291)]=null,state[_0x2d3169(0x29a)]=null,document[_0x2d3169(0x27b)](_0x2d3169(0x239))[_0x2d3169(0x219)]();},'goToLuckyDraw':async()=>{const _0x2bb895=_0x384742;document[_0x2bb895(0x27b)](_0x2bb895(0x21c))[_0x2bb895(0x284)]['add'](_0x2bb895(0x286)),document[_0x2bb895(0x27b)]('screen-luckydraw')[_0x2bb895(0x284)][_0x2bb895(0x25a)](_0x2bb895(0x286)),document[_0x2bb895(0x27b)]('draw-state-validating')['classList'][_0x2bb895(0x25a)](_0x2bb895(0x286)),document[_0x2bb895(0x27b)](_0x2bb895(0x1f4))[_0x2bb895(0x284)][_0x2bb895(0x277)](_0x2bb895(0x286)),document[_0x2bb895(0x27b)](_0x2bb895(0x238))[_0x2bb895(0x284)][_0x2bb895(0x277)](_0x2bb895(0x286)),setTimeout(()=>{const _0x3beccb=_0x2bb895;document[_0x3beccb(0x27b)](_0x3beccb(0x268))[_0x3beccb(0x244)][_0x3beccb(0x216)]=_0x3beccb(0x24c);},0x64),setTimeout(()=>{const _0x1d26da=_0x2bb895;document[_0x1d26da(0x27b)](_0x1d26da(0x268))['style']['width']='100%';},0x5dc),setTimeout(async()=>{const _0x54ff66=_0x2bb895;if(state[_0x54ff66(0x291)])try{const _0x3fda71=doc(db,finalCollectionPath,state['currentDocId']),_0x1ce261=await getDoc(_0x3fda71),_0x522848=_0x1ce261['data']();_0x1ce261[_0x54ff66(0x293)]()&&_0x522848[_0x54ff66(0x264)]?showResult(_0x522848[_0x54ff66(0x264)],!![],_0x522848['rewardClaimTime']):startSpinning();}catch(_0x4be70b){console['error'](_0x4be70b),alert(_0x54ff66(0x24b)),window['app'][_0x54ff66(0x241)]();}else alert(_0x54ff66(0x1f6)),window[_0x54ff66(0x22b)][_0x54ff66(0x241)]();},0x7d0);},'backToSummary':()=>{const _0x44ad8a=_0x384742;document['getElementById'](_0x44ad8a(0x265))[_0x44ad8a(0x284)][_0x44ad8a(0x277)]('hidden'),document[_0x44ad8a(0x27b)](_0x44ad8a(0x21c))['classList']['remove'](_0x44ad8a(0x286)),state[_0x44ad8a(0x29a)]&&(state[_0x44ad8a(0x291)]&&getDoc(doc(db,finalCollectionPath,state[_0x44ad8a(0x291)]))['then'](_0xf99b4d=>{const _0x3fb8b2=_0x44ad8a;_0xf99b4d['exists']()&&updateSuccessScreen(_0xf99b4d[_0x3fb8b2(0x26d)]()[_0x3fb8b2(0x264)],_0xf99b4d[_0x3fb8b2(0x26d)]()['rewardClaimTime']);}));},'claimReward':async _0x121ebe=>{const _0x31483=_0x384742;if(!state['currentDocId'])return;const _0xd5ac4f=_0x121ebe===_0x31483(0x210),_0x1220a4=_0xd5ac4f?_0x31483(0x217):_0x31483(0x27a),_0x3f60a2=_0xd5ac4f?'text-claim-time-summary':_0x31483(0x27f),_0x29c061=_0xd5ac4f?_0x31483(0x285):'claim-time-val',_0x5e517a=document[_0x31483(0x27b)](_0x1220a4),_0x1e072a=_0x5e517a['innerHTML'];_0x5e517a[_0x31483(0x261)]=!![],_0x5e517a['innerText']=_0x31483(0x249);try{await updateDoc(doc(db,finalCollectionPath,state[_0x31483(0x291)]),{'rewardClaimTime':serverTimestamp()});const _0x5c8be1=new Date(),_0x60ec69=_0x5c8be1[_0x31483(0x24a)]('th-TH');_0x5e517a[_0x31483(0x284)]['add']('hidden'),document[_0x31483(0x27b)](_0x3f60a2)[_0x31483(0x284)][_0x31483(0x25a)](_0x31483(0x286)),document[_0x31483(0x27b)](_0x29c061)['innerText']=_0x60ec69,confetti({'particleCount':0x64,'spread':0x3c,'origin':{'y':0.7}});}catch(_0x5883d5){console[_0x31483(0x206)](_0x5883d5),alert(_0x31483(0x28b)),_0x5e517a['disabled']=![],_0x5e517a[_0x31483(0x1f5)]=_0x1e072a;}}};function updateSuccessScreen(_0x28b861,_0x59971e){const _0x539d68=_0x384742;document[_0x539d68(0x27b)](_0x539d68(0x25f))['classList'][_0x539d68(0x277)](_0x539d68(0x286));const _0x226daa=document[_0x539d68(0x27b)]('reward-display-badge');_0x226daa[_0x539d68(0x284)][_0x539d68(0x25a)]('hidden');const _0x15ce08=document[_0x539d68(0x27b)](_0x539d68(0x26c));_0x15ce08[_0x539d68(0x299)]=_0x28b861;_0x28b861===_0x539d68(0x209)?(_0x226daa[_0x539d68(0x284)][_0x539d68(0x25a)](_0x539d68(0x21e),_0x539d68(0x1f8),'border-purple-300'),_0x226daa[_0x539d68(0x284)][_0x539d68(0x277)](_0x539d68(0x1fa),_0x539d68(0x226),_0x539d68(0x25d)),_0x15ce08[_0x539d68(0x284)]['remove'](_0x539d68(0x21a)),_0x15ce08[_0x539d68(0x284)][_0x539d68(0x277)](_0x539d68(0x26b))):(_0x226daa[_0x539d68(0x284)][_0x539d68(0x277)](_0x539d68(0x21e),_0x539d68(0x1f8),'border-purple-300'),_0x226daa['classList'][_0x539d68(0x25a)]('from-gray-100',_0x539d68(0x226),_0x539d68(0x25d)),_0x15ce08[_0x539d68(0x284)]['add']('text-purple-800'),_0x15ce08['classList'][_0x539d68(0x25a)](_0x539d68(0x26b)));document[_0x539d68(0x27b)](_0x539d68(0x212))['classList']['add'](_0x539d68(0x286));const _0x58c52b=document[_0x539d68(0x27b)](_0x539d68(0x267)),_0x1e8379=document['getElementById']('btn-claim-reward-summary'),_0x104c5d=document['getElementById'](_0x539d68(0x29d)),_0x4e545c=document[_0x539d68(0x27b)](_0x539d68(0x285));if(_0x28b861==='ไม่ได้รับรางวัล')_0x58c52b[_0x539d68(0x284)][_0x539d68(0x277)](_0x539d68(0x286));else{_0x58c52b['classList'][_0x539d68(0x25a)](_0x539d68(0x286));if(_0x59971e){_0x1e8379[_0x539d68(0x284)][_0x539d68(0x277)]('hidden'),_0x104c5d['classList'][_0x539d68(0x25a)]('hidden');const _0x165820=_0x59971e[_0x539d68(0x290)]?_0x59971e['toDate']():new Date(_0x59971e);_0x4e545c['innerText']=_0x165820[_0x539d68(0x24a)](_0x539d68(0x28f));}else _0x1e8379[_0x539d68(0x284)]['remove']('hidden'),_0x104c5d[_0x539d68(0x284)][_0x539d68(0x277)]('hidden');}}async function fetchPrizes(){const _0x152642=_0x384742,_0x540930=query(collection(db,prizesCollectionPath));try{onSnapshot(_0x540930,_0x8a074a=>{const _0x59c9e7=_0x3b19,_0x242c89=[];_0x8a074a[_0x59c9e7(0x275)](_0x3a820c=>_0x242c89[_0x59c9e7(0x27d)](_0x3a820c[_0x59c9e7(0x26d)]())),state[_0x59c9e7(0x23c)]=_0x242c89;});}catch(_0x57741a){console[_0x152642(0x206)](_0x152642(0x21f),_0x57741a),state[_0x152642(0x23c)]=[{'name':_0x152642(0x240)}];}}function startSpinning(){const _0x5eb6d8=_0x384742;document[_0x5eb6d8(0x27b)](_0x5eb6d8(0x26f))['classList']['add'](_0x5eb6d8(0x286)),document[_0x5eb6d8(0x27b)](_0x5eb6d8(0x1f4))[_0x5eb6d8(0x284)][_0x5eb6d8(0x25a)]('hidden');const _0x10fc17=[_0x5eb6d8(0x240),_0x5eb6d8(0x276),_0x5eb6d8(0x29e)],_0x136080=state[_0x5eb6d8(0x23c)]['length']>0x0?state[_0x5eb6d8(0x23c)][_0x5eb6d8(0x243)](_0x7d58e0=>_0x7d58e0[_0x5eb6d8(0x28d)]):_0x10fc17,_0x51503f=document[_0x5eb6d8(0x27b)](_0x5eb6d8(0x22d));let _0x27ba24=0x0;const _0x516816=setInterval(()=>{const _0x3b99a9=_0x5eb6d8;_0x51503f['innerText']=_0x136080[Math['floor'](Math[_0x3b99a9(0x237)]()*_0x136080[_0x3b99a9(0x250)])],_0x27ba24++,_0x27ba24>0x14&&(clearInterval(_0x516816),finalizePrize());},0x64);}async function finalizePrize(){const _0x31b481=_0x384742,_0x1cea46=state[_0x31b481(0x23c)][_0x31b481(0x250)]>0x0?state['prizesList'][_0x31b481(0x243)](_0x139bc0=>_0x139bc0['name']):[_0x31b481(0x240)];let _0x47f653='';const _0x5e4e84=Math[_0x31b481(0x237)]()>0.3;_0x5e4e84&&_0x1cea46['length']>0x0?_0x47f653=_0x1cea46[Math[_0x31b481(0x23a)](Math[_0x31b481(0x237)]()*_0x1cea46[_0x31b481(0x250)])]:_0x47f653=_0x31b481(0x209);try{state[_0x31b481(0x291)]&&(await updateDoc(doc(db,finalCollectionPath,state[_0x31b481(0x291)]),{'reward':_0x47f653,'rewardTime':serverTimestamp()}),showResult(_0x47f653,![],null));}catch(_0x15fb27){console['error'](_0x31b481(0x256),_0x15fb27);}}function showResult(_0x108773,_0x280898,_0x5c3353){const _0x1d2500=_0x384742;state[_0x1d2500(0x29a)]=_0x108773,document['getElementById'](_0x1d2500(0x1f4))[_0x1d2500(0x284)]['add'](_0x1d2500(0x286)),document[_0x1d2500(0x27b)](_0x1d2500(0x26f))['classList'][_0x1d2500(0x277)]('hidden'),document[_0x1d2500(0x27b)](_0x1d2500(0x238))[_0x1d2500(0x284)][_0x1d2500(0x25a)](_0x1d2500(0x286));const _0x1c55db=document[_0x1d2500(0x28e)]('#draw-state-result\x20h2'),_0x4000a1=document[_0x1d2500(0x27b)](_0x1d2500(0x295)),_0xff907c=document[_0x1d2500(0x27b)]('prize-result-name'),_0x42eb20=document['getElementById'](_0x1d2500(0x280));if(_0x108773===_0x1d2500(0x209))_0x1c55db[_0x1d2500(0x299)]=_0x280898?_0x1d2500(0x214):_0x1d2500(0x207),_0xff907c['innerText']=_0x1d2500(0x24d),_0xff907c[_0x1d2500(0x284)][_0x1d2500(0x25a)](_0x1d2500(0x271),_0x1d2500(0x242),_0x1d2500(0x205),'from-yellow-600',_0x1d2500(0x287)),_0xff907c['classList'][_0x1d2500(0x277)]('text-gray-500'),_0x4000a1[_0x1d2500(0x284)][_0x1d2500(0x25a)](_0x1d2500(0x260),_0x1d2500(0x201),'border-yellow-300'),_0x4000a1[_0x1d2500(0x284)][_0x1d2500(0x277)](_0x1d2500(0x1fa),_0x1d2500(0x226),_0x1d2500(0x25d)),_0x42eb20[_0x1d2500(0x1f5)]=_0x1d2500(0x1f9),document[_0x1d2500(0x27b)](_0x1d2500(0x22f))[_0x1d2500(0x284)][_0x1d2500(0x277)]('hidden'),document[_0x1d2500(0x27b)](_0x1d2500(0x22c))['classList'][_0x1d2500(0x277)]('hidden');else{_0x1c55db[_0x1d2500(0x299)]=_0x280898?'ท่านเคยได้รับรางวัลแล้ว':_0x1d2500(0x28c),_0xff907c[_0x1d2500(0x299)]=_0x108773,_0xff907c[_0x1d2500(0x284)][_0x1d2500(0x277)](_0x1d2500(0x271),_0x1d2500(0x242),_0x1d2500(0x205),'from-yellow-600',_0x1d2500(0x287)),_0xff907c[_0x1d2500(0x284)][_0x1d2500(0x25a)](_0x1d2500(0x23e)),_0x4000a1['classList'][_0x1d2500(0x277)]('from-yellow-100',_0x1d2500(0x201),_0x1d2500(0x289)),_0x4000a1[_0x1d2500(0x284)]['remove'](_0x1d2500(0x1fa),_0x1d2500(0x226),_0x1d2500(0x25d)),_0x42eb20['innerHTML']='<i\x20data-lucide=\x22crown\x22\x20width=\x2260\x22\x20height=\x2260\x22\x20class=\x22mx-auto\x20text-yellow-500\x22></i>',document[_0x1d2500(0x27b)]('claim-section')['classList'][_0x1d2500(0x25a)]('hidden'),document[_0x1d2500(0x27b)](_0x1d2500(0x22c))[_0x1d2500(0x284)]['remove'](_0x1d2500(0x286));const _0xe68797=document[_0x1d2500(0x27b)]('btn-claim-reward'),_0x59a9ff=document[_0x1d2500(0x27b)](_0x1d2500(0x27f)),_0x43dbf2=document[_0x1d2500(0x27b)]('claim-time-val');if(_0x5c3353){_0xe68797[_0x1d2500(0x284)][_0x1d2500(0x277)]('hidden'),_0x59a9ff[_0x1d2500(0x284)][_0x1d2500(0x25a)](_0x1d2500(0x286));const _0x1ed48b=_0x5c3353[_0x1d2500(0x290)]?_0x5c3353[_0x1d2500(0x290)]():new Date(_0x5c3353);_0x43dbf2[_0x1d2500(0x299)]=_0x1ed48b['toLocaleString']('th-TH');}else _0xe68797['classList'][_0x1d2500(0x25a)](_0x1d2500(0x286)),_0xe68797[_0x1d2500(0x261)]=![],_0x59a9ff['classList'][_0x1d2500(0x277)](_0x1d2500(0x286));!_0x280898&&confetti({'particleCount':0x96,'spread':0x46,'origin':{'y':0.6}});}if(window['lucide'])lucide[_0x1d2500(0x234)]();}async function submitForm(_0x247bb7){const _0x298f06=_0x384742;_0x247bb7['preventDefault']();if(!state[_0x298f06(0x23f)])return;const _0x16cdb0=document[_0x298f06(0x27b)]('btn-submit'),_0x58c107=document[_0x298f06(0x27b)](_0x298f06(0x296)),_0x3c05b0=document['getElementById'](_0x298f06(0x1fe));_0x16cdb0[_0x298f06(0x261)]=!![],_0x58c107[_0x298f06(0x299)]=_0x298f06(0x229),_0x3c05b0['classList'][_0x298f06(0x25a)](_0x298f06(0x286));try{const _0x11a057=getDeviceId(),_0x570d71=state['idCard']['replace'](/-/g,''),_0x2efedd=await sha256(_0x570d71);state[_0x298f06(0x213)]=_0x2efedd;const _0x1848b3=getLocalRegistration();if(_0x1848b3&&_0x1848b3!==_0x2efedd){document[_0x298f06(0x27b)](_0x298f06(0x22e))[_0x298f06(0x299)]=_0x298f06(0x27e),document[_0x298f06(0x27b)](_0x298f06(0x20f))[_0x298f06(0x284)][_0x298f06(0x277)](_0x298f06(0x286)),document[_0x298f06(0x27b)]('screen-error-device')[_0x298f06(0x284)][_0x298f06(0x25a)](_0x298f06(0x286));return;}const _0x14b73f=query(collection(db,finalCollectionPath),where('citizenId','==',_0x2efedd)),_0x49ebf3=await getDocs(_0x14b73f);if(!_0x49ebf3['empty']){const _0x392ae6=_0x49ebf3[_0x298f06(0x231)][0x0],_0x4fd32f=_0x392ae6['data']();if(_0x4fd32f[_0x298f06(0x203)]&&_0x4fd32f[_0x298f06(0x203)]!==_0x11a057){document['getElementById'](_0x298f06(0x22e))['innerHTML']=_0x298f06(0x292),document[_0x298f06(0x27b)](_0x298f06(0x20f))['classList'][_0x298f06(0x277)](_0x298f06(0x286)),document[_0x298f06(0x27b)]('screen-error-device')['classList'][_0x298f06(0x25a)]('hidden');return;}state['currentDocId']=_0x392ae6['id'];let _0x6227b8='-';if(_0x4fd32f[_0x298f06(0x230)]){const _0x4b0aea=_0x4fd32f['CheckIN'][_0x298f06(0x290)]?_0x4fd32f[_0x298f06(0x230)][_0x298f06(0x290)]():new Date(_0x4fd32f[_0x298f06(0x230)]);_0x6227b8=_0x4b0aea[_0x298f06(0x24a)]('th-TH');}let _0x1d948b='';const _0x1c8e15=new Date();_0x1d948b=_0x1c8e15['toLocaleString'](_0x298f06(0x28f));const _0x4cb2ee={};let _0x5b0dcc=![];!_0x4fd32f['deviceId']&&(_0x4cb2ee[_0x298f06(0x203)]=_0x11a057,_0x5b0dcc=!![]);if(!_0x4fd32f[_0x298f06(0x281)])_0x4cb2ee[_0x298f06(0x281)]=serverTimestamp(),_0x4fd32f[_0x298f06(0x230)]?_0x4cb2ee[_0x298f06(0x208)]='ลงทะเบียนสำเร็จ':_0x4cb2ee['status']=_0x298f06(0x220),_0x5b0dcc=!![];else{const _0x337952=_0x4fd32f[_0x298f06(0x281)][_0x298f06(0x290)]?_0x4fd32f[_0x298f06(0x281)]['toDate']():new Date(_0x4fd32f[_0x298f06(0x281)]);_0x1d948b=_0x337952[_0x298f06(0x24a)](_0x298f06(0x28f));}_0x5b0dcc&&await updateDoc(doc(db,finalCollectionPath,_0x392ae6['id']),_0x4cb2ee),setLocalRegistration(_0x2efedd),document[_0x298f06(0x27b)](_0x298f06(0x20b))[_0x298f06(0x299)]=_0x6227b8,document[_0x298f06(0x27b)](_0x298f06(0x222))[_0x298f06(0x299)]=_0x1d948b,document['getElementById'](_0x298f06(0x20f))['classList'][_0x298f06(0x277)](_0x298f06(0x286)),document[_0x298f06(0x27b)](_0x298f06(0x21c))[_0x298f06(0x284)]['remove']('hidden'),_0x4fd32f[_0x298f06(0x264)]?(state[_0x298f06(0x29a)]=_0x4fd32f[_0x298f06(0x264)],updateSuccessScreen(_0x4fd32f[_0x298f06(0x264)],_0x4fd32f[_0x298f06(0x254)])):(state[_0x298f06(0x29a)]=null,document['getElementById'](_0x298f06(0x25f))[_0x298f06(0x284)][_0x298f06(0x25a)](_0x298f06(0x286)),document[_0x298f06(0x27b)]('reward-display-badge')['classList'][_0x298f06(0x277)](_0x298f06(0x286)),document[_0x298f06(0x27b)]('claim-section-summary')[_0x298f06(0x284)]['add'](_0x298f06(0x286)));}else{const _0x419a73=query(collection(db,finalCollectionPath),where(_0x298f06(0x203),'==',_0x11a057)),_0x1045c9=await getDocs(_0x419a73);if(!_0x1045c9[_0x298f06(0x25e)])document[_0x298f06(0x27b)](_0x298f06(0x22e))[_0x298f06(0x299)]=_0x298f06(0x26a),document['getElementById'](_0x298f06(0x20f))[_0x298f06(0x284)][_0x298f06(0x277)](_0x298f06(0x286)),document[_0x298f06(0x27b)](_0x298f06(0x225))[_0x298f06(0x284)][_0x298f06(0x25a)]('hidden');else{const _0x566eae=await addDoc(collection(db,finalCollectionPath),{'citizenId':_0x2efedd,'deviceId':_0x11a057,'CheckIN':serverTimestamp(),'CheckOUT':serverTimestamp(),'status':'ลงทะเบียนสำเร็จ'});state[_0x298f06(0x291)]=_0x566eae['id'],setLocalRegistration(_0x2efedd);const _0x5055ad=new Date(),_0x2f1936=_0x5055ad[_0x298f06(0x24a)](_0x298f06(0x28f));updateSuccessUI(_0x2f1936,_0x2f1936,null,null,!![]);}}}catch(_0x296922){console[_0x298f06(0x206)](_0x296922),alert(_0x298f06(0x298)+_0x296922['message']);}finally{_0x16cdb0[_0x298f06(0x261)]=![],_0x58c107[_0x298f06(0x299)]='ลงทะเบียนออก',_0x3c05b0[_0x298f06(0x284)]['add'](_0x298f06(0x286)),validateForm();}}function handleIdInput(_0xc302fc){const _0x26671b=_0x384742;let _0x4f83f7=_0xc302fc[_0x26671b(0x27c)][_0x26671b(0x21d)]['replace'](/[^0-9]/g,'');if(_0x4f83f7[_0x26671b(0x250)]>0xd)_0x4f83f7=_0x4f83f7[_0x26671b(0x20d)](0x0,0xd);let _0x46c80d=_0x4f83f7;if(_0x4f83f7['length']>0x1)_0x46c80d=_0x4f83f7[_0x26671b(0x20d)](0x0,0x1)+'-'+_0x4f83f7['slice'](0x1);if(_0x4f83f7[_0x26671b(0x250)]>0x5)_0x46c80d=_0x46c80d['slice'](0x0,0x6)+'-'+_0x46c80d['slice'](0x6);if(_0x4f83f7[_0x26671b(0x250)]>0xa)_0x46c80d=_0x46c80d[_0x26671b(0x20d)](0x0,0xc)+'-'+_0x46c80d[_0x26671b(0x20d)](0xc);if(_0x4f83f7['length']>0xc)_0x46c80d=_0x46c80d[_0x26671b(0x20d)](0x0,0xf)+'-'+_0x46c80d[_0x26671b(0x20d)](0xf);document[_0x26671b(0x27b)](_0x26671b(0x239))[_0x26671b(0x21d)]=_0x46c80d,state['idCard']=_0x46c80d;const _0xe1ceb2=document[_0x26671b(0x27b)](_0x26671b(0x202)),_0x59580b=document[_0x26671b(0x27b)](_0x26671b(0x239));_0x4f83f7['length']===0xd?(_0x59580b['classList']['add'](_0x26671b(0x288),_0x26671b(0x255)),_0x59580b[_0x26671b(0x284)][_0x26671b(0x25a)](_0x26671b(0x232)),_0xe1ceb2[_0x26671b(0x284)]['remove']('hidden')):(_0x59580b[_0x26671b(0x284)][_0x26671b(0x25a)](_0x26671b(0x288),_0x26671b(0x255)),_0x59580b[_0x26671b(0x284)][_0x26671b(0x277)](_0x26671b(0x232)),_0xe1ceb2[_0x26671b(0x284)][_0x26671b(0x277)](_0x26671b(0x286))),validateForm();}function validateForm(){const _0x24b336=_0x384742,_0x40f776=state[_0x24b336(0x239)][_0x24b336(0x204)](/[^0-9]/g,'')[_0x24b336(0x250)]===0xd,_0x11cd35=document[_0x24b336(0x27b)]('btn-submit');_0x40f776?(_0x11cd35['disabled']=![],_0x11cd35[_0x24b336(0x284)][_0x24b336(0x277)](_0x24b336(0x200),_0x24b336(0x259),_0x24b336(0x1fc),_0x24b336(0x24e)),_0x11cd35[_0x24b336(0x284)][_0x24b336(0x25a)](_0x24b336(0x228),'text-gray-400',_0x24b336(0x263),_0x24b336(0x282))):(_0x11cd35['disabled']=!![],_0x11cd35['classList'][_0x24b336(0x25a)]('bg-purple-600',_0x24b336(0x259),_0x24b336(0x1fc),_0x24b336(0x24e)),_0x11cd35[_0x24b336(0x284)][_0x24b336(0x277)]('bg-gray-200',_0x24b336(0x29c),_0x24b336(0x263),'shadow-none'));}document['getElementById'](_0x384742(0x266))[_0x384742(0x279)](_0x384742(0x221),submitForm),document[_0x384742(0x27b)](_0x384742(0x239))[_0x384742(0x279)](_0x384742(0x248),handleIdInput),window[_0x384742(0x279)](_0x384742(0x1f7),()=>document[_0x384742(0x27b)](_0x384742(0x239))[_0x384742(0x219)]());async function initAuth(){const _0x1d4563=_0x384742;typeof __initial_auth_token!==_0x1d4563(0x251)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth),fetchPrizes();}onAuthStateChanged(auth,_0x57091e=>state[_0x384742(0x23f)]=_0x57091e),initAuth();if(window[_0x384742(0x294)])lucide[_0x384742(0x234)]();

    </script>
</body>
</html>