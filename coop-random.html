<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบสุ่มของรางวัล - TMB-Coop</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Font (Sarabun) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body { font-family: 'Sarabun', sans-serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.3); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.5); }

        .winner-card-enter {
            animation: cardSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            opacity: 0;
        }
        @keyframes cardSlideIn {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .header-gradient {
            background: linear-gradient(to right, #1e3a8a, #1d4ed8);
        }

        /* ปรับสีพื้นหลังด้านล่างตามคำขอ rgb(118 157 238) */
        .main-bg {
            background-color: rgb(118 157 238);
        }

        .card-shadow {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        .prize-glow-light {
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body class="main-bg min-h-screen text-slate-700 flex flex-col overflow-hidden text-sm">

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-6 right-6 z-[200] flex flex-col gap-3 w-80 pointer-events-none text-sm"></div>

    <!-- Header: Navigation & Control (Deep Blue Area) -->
    <header class="p-6 header-gradient border-b border-blue-800 backdrop-blur-xl z-20 shadow-2xl">
        <div class="max-w-[1600px] mx-auto flex flex-col xl:flex-row items-end gap-4 text-sm">
            <!-- Branding -->
            <div class="flex items-center gap-3 pr-6 border-r border-blue-700 hidden xl:flex self-center">
                <div class="bg-white/10 p-2 rounded-xl border border-white/20 shadow-sm text-white">
                    <i data-lucide="award" width="20" height="20"></i>
                </div>
                <span class="font-bold text-white whitespace-nowrap text-sm">TMB-Coop<br>LuckyDraw</span>
            </div>

            <!-- Prize Selection & Qty -->
            <div class="flex-1 w-full flex flex-col md:flex-row gap-4 text-sm">
                <div class="flex-1">
                    <label class="block text-blue-100 font-medium mb-1.5 ml-1 text-sm">เลือกรายการของรางวัล</label>
                    <select id="prize-select" onchange="window.app.updateStockInfo()" class="w-full bg-blue-950/50 border border-blue-700 text-white p-2.5 rounded-xl text-sm outline-none focus:ring-2 focus:ring-blue-400 transition shadow-inner">
                        <option value="">-- กรุณาเลือกของรางวัล --</option>
                    </select>
                </div>
                <div class="w-full md:w-32 text-sm">
                    <label class="block text-blue-100 font-medium mb-1.5 ml-1 text-sm">จำนวนสุ่ม</label>
                    <input type="number" id="draw-qty" value="1" min="1" oninput="window.app.onQtyChange()" class="w-full bg-blue-950/50 border border-blue-700 text-white p-2.5 rounded-xl text-center font-bold text-sm outline-none focus:ring-2 focus:ring-blue-400 transition">
                </div>
            </div>

            <!-- Stats Boxes Row -->
            <div class="flex flex-wrap gap-3 justify-center text-sm">
                <div class="bg-blue-950/40 px-4 py-1.5 rounded-xl border border-blue-700/50 text-center min-w-[100px]">
                    <span class="text-sm text-blue-300 uppercase font-bold">คงเหลือ</span><br>
                    <span id="label-remaining" class="text-3xl font-black text-orange-400 leading-tight">0</span>
                </div>
                <div class="bg-blue-950/40 px-4 py-1.5 rounded-xl border border-blue-700/50 text-center min-w-[100px]">
                    <span class="text-sm text-blue-300 uppercase font-bold">แจกแล้ว</span><br>
                    <span id="label-drawn" class="text-3xl font-black text-blue-300 leading-tight">0</span>
                </div>
                <div class="bg-blue-950/40 px-4 py-1.5 rounded-xl border border-blue-700/50 text-center min-w-[100px]">
                    <span class="text-sm text-blue-300 uppercase font-bold">ลงทะเบียน</span><br>
                    <span id="label-total-members" class="text-3xl font-black text-white leading-tight">0</span>
                </div>
                <div class="bg-blue-950/40 px-4 py-1.5 rounded-xl border border-blue-700/50 text-center min-w-[100px]">
                    <span class="text-sm text-blue-300 uppercase font-bold">ไม่ได้รางวัล</span><br>
                    <span id="label-not-won" class="text-3xl font-black text-emerald-400 leading-tight">0</span>
                </div>
                <div class="bg-blue-950/40 px-4 py-1.5 rounded-xl border border-blue-700/50 text-center min-w-[100px]">
                    <span class="text-sm text-blue-300 uppercase font-bold">ได้รางวัล</span><br>
                    <span id="label-already-won" class="text-3xl font-black text-purple-400 leading-tight">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col overflow-hidden p-6 lg:p-8 max-w-7xl mx-auto w-full">
        <!-- Title -->
        <div class="mb-6 text-center">
            <h2 id="current-prize-display" class="text-2xl font-black text-blue-900 uppercase tracking-tight">ระบบสุ่มรางวัล</h2>
            <p id="prize-subtitle" class="text-white/80 text-sm font-bold tracking-wide uppercase mt-1">Ready for the draw</p>
        </div>

        <!-- Drawing Workspace -->
        <div class="flex-1 bg-white/30 rounded-[2rem] p-6 lg:p-10 overflow-hidden flex flex-col relative shadow-inner border border-white/20 backdrop-blur-sm">
            <!-- Results Container (2 Columns Grid) -->
            <div id="results-container" class="flex-1 overflow-y-auto grid grid-cols-1 md:grid-cols-2 gap-4 content-start pr-2">
                <!-- Initial Start UI -->
                <div id="empty-state" class="col-span-full h-full flex flex-col items-center justify-center space-y-8 py-20 mt-20">
                    <div class="relative">
                        <div class="absolute -inset-10 bg-white/20 blur-3xl rounded-full animate-pulse"></div>
                        <button onclick="window.app.startDraw()" id="btn-start-main" disabled class="relative px-12 py-5 bg-gradient-to-br from-blue-700 to-indigo-800 hover:from-blue-800 hover:to-indigo-900 text-white rounded-3xl font-black flex items-center gap-4 shadow-2xl disabled:opacity-40 disabled:grayscale transform transition hover:scale-105 active:scale-95 text-xl group">
                            <i data-lucide="play" width="28" class="fill-current group-hover:rotate-12 transition-transform"></i> 
                            คลิกเพื่อเริ่มสุ่มรางวัล
                        </button>
                    </div>
                    <p class="text-white font-black tracking-[0.2em] uppercase text-xs opacity-60">Ready to find lucky winners</p>
                </div>
            </div>
            
            <!-- Summary Footer -->
            <div id="results-footer" class="hidden mt-6 pt-4 border-t border-white/20 flex flex-col items-center gap-4 text-sm">
                <p class="text-white font-bold italic">รายการสุ่มรอบปัจจุบันเสร็จสมบูรณ์</p>
                <button onclick="window.app.clearDisplay()" class="px-8 py-3 bg-blue-800 text-white rounded-2xl transition flex items-center gap-3 font-bold uppercase tracking-tight shadow-xl hover:bg-blue-900 group border border-white/10">
                    <i data-lucide="refresh-ccw" width="18" class="group-hover:rotate-180 transition-transform duration-500"></i> คลิกเพื่อทำการเริ่มต้นสุ่มของรางวัลใหม่
                </button>
            </div>
        </div>
    </main>

    <!-- Drawing Overlay -->
    <div id="draw-overlay" class="hidden fixed inset-0 bg-blue-900/95 z-[250] flex items-center justify-center backdrop-blur-md">
        <div class="text-center text-white">
            <div class="relative mb-10">
                <div class="w-36 h-36 border-[12px] border-white/10 border-t-white rounded-full animate-spin mx-auto shadow-[0_0_100px_rgba(255,255,255,0.2)]"></div>
                <div class="absolute inset-0 flex items-center justify-center text-blue-300">
                    <i data-lucide="sparkles" width="48" height="48" class="animate-pulse text-white"></i>
                </div>
            </div>
            <h3 class="text-2xl font-black tracking-tighter mb-4 uppercase text-white">กำลังสุ่มรายชื่อ...</h3>
            <p class="text-blue-200/60 text-xs font-light tracking-[0.3em] uppercase">Searching Winners</p>
        </div>
    </div>

    <!-- Logic -->
    <script type="module">
const _0x3e3338=_0x3c63;(function(_0x36971e,_0xf45cc8){const _0x1e5c1a=_0x3c63,_0x31d3c9=_0x36971e();while(!![]){try{const _0x3dc134=-parseInt(_0x1e5c1a(0x1ea))/0x1+-parseInt(_0x1e5c1a(0x1b0))/0x2*(parseInt(_0x1e5c1a(0x19e))/0x3)+parseInt(_0x1e5c1a(0x1a5))/0x4*(parseInt(_0x1e5c1a(0x1ed))/0x5)+parseInt(_0x1e5c1a(0x1da))/0x6+-parseInt(_0x1e5c1a(0x1e3))/0x7+parseInt(_0x1e5c1a(0x19b))/0x8+-parseInt(_0x1e5c1a(0x19c))/0x9;if(_0x3dc134===_0xf45cc8)break;else _0x31d3c9['push'](_0x31d3c9['shift']());}catch(_0x53086a){_0x31d3c9['push'](_0x31d3c9['shift']());}}}(_0x5858,0xcfe05));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js';import{getAuth,signInAnonymously,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js';import{getFirestore,collection,query,updateDoc,doc,serverTimestamp,onSnapshot}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js';const appId=typeof __app_id!==_0x3e3338(0x1e4)?__app_id:_0x3e3338(0x1ca),isSandbox=typeof __firebase_config!==_0x3e3338(0x1e4),fbConfig=isSandbox?JSON[_0x3e3338(0x1ba)](__firebase_config):{'apiKey':_0x3e3338(0x1e8),'authDomain':'ttb-register.firebaseapp.com','projectId':_0x3e3338(0x1d0),'storageBucket':_0x3e3338(0x1e5),'messagingSenderId':'1070273157855','appId':_0x3e3338(0x198)},colRegis=isSandbox?_0x3e3338(0x1b2)+appId+_0x3e3338(0x1cf):_0x3e3338(0x1ec),colGift=isSandbox?_0x3e3338(0x1b2)+appId+'/public/data/coop_gift':_0x3e3338(0x1d6),app=initializeApp(fbConfig),auth=getAuth(app),db=getFirestore(app),state={'users':[],'prizes':[],'isDrawing':![]};window[_0x3e3338(0x1d9)]={'updateGeneralStats':()=>{const _0x280f3e=_0x3e3338,_0x296637=state[_0x280f3e(0x1c7)][_0x280f3e(0x196)](_0x261277=>_0x261277[_0x280f3e(0x1c0)]),_0x2492f2=_0x296637[_0x280f3e(0x196)](_0x8b43e9=>_0x8b43e9[_0x280f3e(0x1bd)]&&_0x8b43e9['reward']!=='')['length'],_0x1c909f=_0x296637[_0x280f3e(0x19d)]-_0x2492f2,_0x4aa8ae=document[_0x280f3e(0x1b5)](_0x280f3e(0x1e1));if(_0x4aa8ae)_0x4aa8ae[_0x280f3e(0x1f7)]=_0x296637[_0x280f3e(0x19d)][_0x280f3e(0x1df)]();const _0x1fe792=document[_0x280f3e(0x1b5)](_0x280f3e(0x1bc));if(_0x1fe792)_0x1fe792[_0x280f3e(0x1f7)]=_0x2492f2[_0x280f3e(0x1df)]();const _0x2720c9=document[_0x280f3e(0x1b5)](_0x280f3e(0x1bf));if(_0x2720c9)_0x2720c9[_0x280f3e(0x1f7)]=_0x1c909f[_0x280f3e(0x1df)]();},'updateStockInfo':()=>{const _0x5636ca=_0x3e3338,_0x3c28a6=document['getElementById']('prize-select'),_0x373611=document[_0x5636ca(0x1b5)]('current-prize-display'),_0x4a90a6=document['getElementById'](_0x5636ca(0x1b8)),_0x2ef35f=document[_0x5636ca(0x1b5)]('draw-qty'),_0xbe05f7=_0x3c28a6&&_0x3c28a6[_0x5636ca(0x1c9)]!=='';if(_0x4a90a6)_0x4a90a6['disabled']=!_0xbe05f7;if(!_0xbe05f7){document[_0x5636ca(0x1b5)](_0x5636ca(0x1dd))[_0x5636ca(0x1f7)]='0',document['getElementById'](_0x5636ca(0x1db))[_0x5636ca(0x1f7)]='0',_0x373611[_0x5636ca(0x1f7)]=_0x5636ca(0x1b6);return;}const _0x2e25cf=_0x3c28a6['options'][_0x3c28a6['selectedIndex']],_0x14d112=_0x2e25cf[_0x5636ca(0x19a)],_0x14c7f4=parseInt(_0x2e25cf['getAttribute'](_0x5636ca(0x1c4))||0x0),_0x517192=parseInt(_0x2e25cf['getAttribute']('data-qty')||0x1),_0x2b2652=state[_0x5636ca(0x1c7)][_0x5636ca(0x196)](_0x3f8f80=>_0x3f8f80[_0x5636ca(0x1bd)]===_0x14d112)[_0x5636ca(0x19d)],_0x22455f=_0x14c7f4-_0x2b2652;_0x2ef35f&&(_0x2ef35f[_0x5636ca(0x1c9)]=Math['min'](_0x517192,_0x22455f>0x0?_0x22455f:0x1)),document[_0x5636ca(0x1b5)](_0x5636ca(0x1dd))[_0x5636ca(0x1f7)]=_0x22455f[_0x5636ca(0x1df)](),document[_0x5636ca(0x1b5)](_0x5636ca(0x1db))['innerText']=_0x2b2652[_0x5636ca(0x1df)](),_0x373611[_0x5636ca(0x1f7)]=_0x14d112,window[_0x5636ca(0x1d9)][_0x5636ca(0x1eb)]();},'onQtyChange':()=>{const _0x4128e2=_0x3e3338;window[_0x4128e2(0x1d9)]['clearDisplay']();},'clearDisplay':()=>{const _0x291d30=_0x3e3338,_0x2a35af=document['getElementById']('results-container');if(state[_0x291d30(0x1e2)]||!_0x2a35af)return;_0x2a35af[_0x291d30(0x1f4)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22empty-state\x22\x20class=\x22col-span-full\x20h-full\x20flex\x20flex-col\x20items-center\x20justify-center\x20space-y-8\x20py-20\x20mt-20\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22relative\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20-inset-10\x20bg-white/20\x20blur-3xl\x20rounded-full\x20animate-pulse\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22window.app.startDraw()\x22\x20id=\x22btn-start-main\x22\x20'+(document[_0x291d30(0x1b5)](_0x291d30(0x1f6))[_0x291d30(0x1c9)]?'':'disabled')+_0x291d30(0x1a7),document['getElementById'](_0x291d30(0x1b4))[_0x291d30(0x1e7)][_0x291d30(0x1ce)]('hidden'),lucide[_0x291d30(0x1cc)]();},'startDraw':async()=>{const _0x1c4841=_0x3e3338,_0x358bdd=document['getElementById'](_0x1c4841(0x1f6)),_0x5930a7=document[_0x1c4841(0x1b5)]('draw-qty');if(!_0x358bdd||!_0x358bdd[_0x1c4841(0x1c9)])return;const _0x408605=parseInt(_0x5930a7[_0x1c4841(0x1c9)]),_0x1f2449=_0x358bdd[_0x1c4841(0x1ac)][_0x358bdd[_0x1c4841(0x1ae)]]['text'],_0x9ec899=parseInt(document[_0x1c4841(0x1b5)](_0x1c4841(0x1dd))['innerText'][_0x1c4841(0x1d8)](/,/g,''));if(_0x408605>_0x9ec899)return window[_0x1c4841(0x1d9)][_0x1c4841(0x1ef)](_0x1c4841(0x1ab),'error');const _0x4c0d60=state[_0x1c4841(0x1c7)]['filter'](_0xfdd8d9=>_0xfdd8d9[_0x1c4841(0x1c0)]&&!_0xfdd8d9[_0x1c4841(0x1bd)]);if(_0x4c0d60['length']===0x0)return window[_0x1c4841(0x1d9)][_0x1c4841(0x1ef)](_0x1c4841(0x1b3),_0x1c4841(0x1c5));state['isDrawing']=!![];const _0x23cf0c=document[_0x1c4841(0x1b5)](_0x1c4841(0x1b8));if(_0x23cf0c)_0x23cf0c[_0x1c4841(0x1af)]=!![];document[_0x1c4841(0x1b5)](_0x1c4841(0x1bb))[_0x1c4841(0x1e7)][_0x1c4841(0x1cb)](_0x1c4841(0x1c8)),await new Promise(_0x5103fa=>setTimeout(_0x5103fa,0x7d0)),document['getElementById'](_0x1c4841(0x1bb))['classList']['add'](_0x1c4841(0x1c8));const _0x45c5c9=document[_0x1c4841(0x1b5)](_0x1c4841(0x197));_0x45c5c9['innerHTML']='';const _0x489c02=_0x4c0d60[_0x1c4841(0x1d4)](()=>Math['random']()-0.5)['slice'](0x0,_0x408605);for(let _0x525103=0x0;_0x525103<_0x489c02[_0x1c4841(0x19d)];_0x525103++){const _0x3345e4=_0x489c02[_0x525103];if(_0x525103>0x0)await new Promise(_0x132fc1=>setTimeout(_0x132fc1,0x7d0));const _0x30f159=document[_0x1c4841(0x1a1)](_0x1c4841(0x1f3));_0x30f159['className']=_0x1c4841(0x1a6),_0x30f159[_0x1c4841(0x1f4)]=_0x1c4841(0x1a2)+(_0x525103+0x1)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22truncate\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-2xl\x20font-black\x20text-slate-800\x20truncate\x20leading-tight\x22>'+(_0x3345e4[_0x1c4841(0x1be)]||_0x1c4841(0x1f5))+_0x1c4841(0x1b1)+_0x1f2449+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x45c5c9['appendChild'](_0x30f159),_0x45c5c9[_0x1c4841(0x195)]=_0x45c5c9['scrollHeight'],await updateDoc(doc(db,colRegis,_0x3345e4['id']),{'reward':_0x1f2449,'rewardTime':serverTimestamp()}),confetti({'particleCount':0x19,'spread':0x3c,'origin':{'y':0.8},'colors':['#1d4ed8',_0x1c4841(0x1b7),_0x1c4841(0x1c2),_0x1c4841(0x1d2)]});}state[_0x1c4841(0x1e2)]=![],document[_0x1c4841(0x1b5)](_0x1c4841(0x1b4))['classList'][_0x1c4841(0x1cb)](_0x1c4841(0x1c8)),lucide[_0x1c4841(0x1cc)]();},'showToast':(_0x11da8a,_0x1828a5=_0x3e3338(0x1a9))=>{const _0x453e7e=_0x3e3338,_0x27ec2c=document['getElementById'](_0x453e7e(0x1f1)),_0x4412c8=document[_0x453e7e(0x1a1)]('div');_0x4412c8[_0x453e7e(0x199)]=_0x453e7e(0x1c6)+(_0x1828a5===_0x453e7e(0x1a9)?_0x453e7e(0x1e6):'bg-white\x20border-red-500\x20text-slate-700')+_0x453e7e(0x194),_0x4412c8['innerHTML']=_0x453e7e(0x1a3)+_0x11da8a+_0x453e7e(0x1ad);if(_0x27ec2c)_0x27ec2c['appendChild'](_0x4412c8);lucide[_0x453e7e(0x1cc)](),setTimeout(()=>{const _0x3bbb35=_0x453e7e;_0x4412c8[_0x3bbb35(0x1c1)][_0x3bbb35(0x1f2)]='0',setTimeout(()=>_0x4412c8[_0x3bbb35(0x1cb)](),0x1f4);},0xbb8);}};async function init(){const _0x40f4d0=_0x3e3338;try{if(typeof __initial_auth_token!==_0x40f4d0(0x1e4)&&__initial_auth_token)await signInWithCustomToken(auth,__initial_auth_token);else await signInAnonymously(auth);document['getElementById'](_0x40f4d0(0x19f))?.['classList'][_0x40f4d0(0x1d8)]('bg-red-500',_0x40f4d0(0x1cd));const _0x5107e9=document['getElementById'](_0x40f4d0(0x1b9));_0x5107e9&&(_0x5107e9[_0x40f4d0(0x1f7)]='Online',_0x5107e9[_0x40f4d0(0x1e7)][_0x40f4d0(0x1d8)](_0x40f4d0(0x1c3),_0x40f4d0(0x1dc))),onSnapshot(query(collection(db,colGift)),_0x4f968e=>{const _0x19e88e=_0x40f4d0,_0x7415c9=[];_0x4f968e[_0x19e88e(0x1d3)](_0x89a191=>_0x7415c9[_0x19e88e(0x1d5)]({'id':_0x89a191['id'],..._0x89a191[_0x19e88e(0x1ee)]()})),state[_0x19e88e(0x1f0)]=_0x7415c9;const _0x44910f=document[_0x19e88e(0x1b5)](_0x19e88e(0x1f6));if(_0x44910f){const _0x481c83=_0x44910f['value'];_0x44910f[_0x19e88e(0x1f4)]=_0x19e88e(0x1aa)+_0x7415c9['map'](_0x3e2845=>'<option\x20value=\x22'+_0x3e2845['id']+_0x19e88e(0x1a4)+_0x3e2845[_0x19e88e(0x1a8)]+_0x19e88e(0x1e9)+_0x3e2845[_0x19e88e(0x1de)]+'\x22>'+_0x3e2845['name']+_0x19e88e(0x1a0))[_0x19e88e(0x1e0)](''),_0x44910f['value']=_0x481c83;}}),onSnapshot(query(collection(db,colRegis)),_0x13d5c6=>{const _0x4ffbe9=_0x40f4d0,_0x3e967f=[];_0x13d5c6[_0x4ffbe9(0x1d3)](_0x5c7d0d=>_0x3e967f['push']({'id':_0x5c7d0d['id'],..._0x5c7d0d[_0x4ffbe9(0x1ee)]()})),state[_0x4ffbe9(0x1c7)]=_0x3e967f,window[_0x4ffbe9(0x1d9)][_0x4ffbe9(0x1d1)]();const _0x251c97=document[_0x4ffbe9(0x1b5)]('prize-select');if(_0x251c97&&_0x251c97['value']){const _0x1960ce=_0x251c97[_0x4ffbe9(0x1ac)][_0x251c97[_0x4ffbe9(0x1ae)]],_0x4aa645=_0x1960ce[_0x4ffbe9(0x19a)],_0x137b24=parseInt(_0x1960ce[_0x4ffbe9(0x1d7)]('data-total')||0x0),_0x38674b=state[_0x4ffbe9(0x1c7)][_0x4ffbe9(0x196)](_0x3a053b=>_0x3a053b[_0x4ffbe9(0x1bd)]===_0x4aa645)[_0x4ffbe9(0x19d)];document[_0x4ffbe9(0x1b5)](_0x4ffbe9(0x1dd))[_0x4ffbe9(0x1f7)]=(_0x137b24-_0x38674b)[_0x4ffbe9(0x1df)](),document[_0x4ffbe9(0x1b5)](_0x4ffbe9(0x1db))[_0x4ffbe9(0x1f7)]=_0x38674b[_0x4ffbe9(0x1df)]();}});}catch(_0x14ebdc){console['error'](_0x14ebdc);}}init(),lucide[_0x3e3338(0x1cc)]();function _0x3c63(_0x4bed65,_0x4d1b7a){_0x4bed65=_0x4bed65-0x194;const _0x585823=_0x5858();let _0x3c6301=_0x585823[_0x4bed65];return _0x3c6301;}function _0x5858(){const _0x43839f=['artifacts/','ไม่มีผู้มีสิทธิ์คงเหลือในระบบลงทะเบียน','results-footer','getElementById','ระบบสุ่มรางวัล','#1e40af','btn-start-main','status-text','parse','draw-overlay','label-already-won','reward','EmpName','label-not-won','CheckIN','style','#3b82f6','text-slate-400','data-total','error','p-4\x20rounded-2xl\x20shadow-2xl\x20border-l-4\x20','users','hidden','value','default-app-id','remove','createIcons','bg-green-500','add','/public/data/coop_registrations','ttb-register','updateGeneralStats','#ffffff','forEach','sort','push','coop_gift','getAttribute','replace','app','2043966nTJrwj','label-drawn','text-blue-100','label-remaining','qtyPerDraw','toLocaleString','join','label-total-members','isDrawing','888377nhcNOn','undefined','ttb-register.firebasestorage.app','bg-white\x20border-green-500\x20text-slate-700','classList','AIzaSyAgWMzWcZPzyzoBu5eQzj2y59nKsxTWurQ','\x22\x20data-qty=\x22','366749VKlYSX','clearDisplay','tmb_coop','15eECbcQ','data','showToast','prizes','toast-container','opacity','div','innerHTML','ไม่ระบุชื่อ','prize-select','innerText','\x20fade-in-up\x20flex\x20justify-between\x20items-center\x20gap-4\x20text-xs\x20font-bold','scrollTop','filter','results-container','1:1070273157855:web:5c8120e1df27e233d8676a','className','text','12502464JLIYOR','6758874crkQAf','length','3oHkFvx','status-indicator','</option>','createElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-6\x20min-w-0\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-shrink-0\x20w-11\x20h-11\x20bg-blue-600\x20text-white\x20rounded-full\x20flex\x20items-center\x20justify-center\x20font-bold\x20text-xl\x20shadow-md\x20border-2\x20border-white/20\x22>','<span>','\x22\x20data-total=\x22','1625628OMptdX','winner-card-enter\x20bg-white\x20border-0\x20px-8\x20rounded-2xl\x20flex\x20items-center\x20justify-between\x20transition-all\x20card-shadow\x20h-[70px]\x20relative\x20overflow-hidden\x20group','\x20class=\x22relative\x20px-12\x20py-5\x20bg-gradient-to-br\x20from-blue-700\x20to-indigo-800\x20hover:from-blue-800\x20hover:to-indigo-900\x20text-white\x20rounded-3xl\x20font-black\x20flex\x20items-center\x20gap-4\x20shadow-2xl\x20disabled:opacity-40\x20disabled:grayscale\x20transform\x20transition\x20hover:scale-105\x20active:scale-95\x20text-xl\x20group\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20data-lucide=\x22play\x22\x20width=\x2228\x22\x20class=\x22fill-current\x20group-hover:rotate-12\x20transition-transform\x22></i>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20คลิกเพื่อเริ่มสุ่มรางวัล\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-white\x20font-black\x20tracking-[0.2em]\x20uppercase\x20text-xs\x20opacity-60\x22>Ready\x20to\x20find\x20lucky\x20winners</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','totalQty','success','<option\x20value=\x22\x22>--\x20กรุณาเลือกรายการของรางวัล\x20--</option>','จำนวนรางวัลคงเหลือไม่พอสำหรับการสุ่มครั้งนี้','options','</span><button\x20onclick=\x22this.parentElement.remove()\x22><i\x20data-lucide=\x22x\x22\x20width=\x2214\x22></i></button>','selectedIndex','disabled','2053166bKkNHh','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-shrink-0\x20ml-6\x20text-right\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-base\x20font-bold\x20text-blue-700\x20bg-blue-50/80\x20px-5\x20py-1.5\x20rounded-full\x20uppercase\x20tracking-tighter\x20shadow-sm\x20border\x20border-blue-100\x22>'];_0x5858=function(){return _0x43839f;};return _0x5858();}
    </script>
</body>

</html>
