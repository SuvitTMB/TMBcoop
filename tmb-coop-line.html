<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Font (Sarabun) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .hidden { display: none !important; }
        /* Custom Animations */
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        
        /* Remove number arrows */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-10">

    <!-- Header Section -->
    <div class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white p-6 rounded-b-[2.5rem] shadow-lg mb-8 relative overflow-hidden">
        <div class="absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10">
            <i data-lucide="shield-check" width="150" height="150"></i>
        </div>
        
        <div class="relative z-10 flex flex-col items-center">
            <div class="bg-white/20 p-3 rounded-full mb-3 backdrop-blur-sm">
                <i data-lucide="user" width="32" height="32" class="text-white"></i>
            </div>
            <h1 class="text-xl font-bold text-center">ลงทะเบียนสมาชิก</h1>
            <p class="text-blue-100 text-sm mt-1">สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</p>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="px-2 sm:px-4 max-w-lg mx-auto -mt-10">
        
        <!-- Registration Form Screen -->
        <div id="screen-form" class="bg-white rounded-2xl shadow-xl p-6 border border-slate-100 relative z-20">
            
            <form id="registration-form" class="space-y-6 pt-2">
                <center>
                <!-- Single Input ID Card -->
                <div>
                    <label for="idCard" class="block text-sm font-semibold text-gray-700 mb-2">
                        เลขบัตรประจำตัวประชาชน
                    </label>
                    <div class="relative">
                        <input
                            type="text"
                            id="idCard"
                            placeholder="x-xxxx-xxxxx-xx-x"
                            class="w-full text-xl font-mono tracking-wide p-4 rounded-xl border-2 border-gray-200 bg-white focus:border-blue-400 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center"
                            inputmode="numeric"
                            maxlength="17"
                        />
                        <i id="icon-check-valid" data-lucide="check-circle" class="hidden absolute right-4 top-1/2 transform -translate-y-1/2 text-green-500 w-6 h-6 animate-fade-in"></i>
                    </div>
                    <p class="text-xs text-gray-400 mt-2 ml-1">กรุณากรอกตัวเลข 13 หลักให้ครบถ้วน</p>
                </div>

                <!-- Info Box -->
                <div class="p-3 bg-blue-50 text-blue-800 rounded-lg text-xs flex gap-2 items-start" style="margin-top:25px; text-align: left;">
                    <i data-lucide="info" class="w-4 h-4 shrink-0 mt-0.5"></i>
                    <span>จำกัดสิทธิ์ 1 เครื่องโทรศัพท์ต่อ 1 หมายเลขบัตรฯ เท่านั้น<br>ผู้ที่จะได้รับรางวัลค่าตอบแทนการประชุม 200 บาทจะต้องลงทะเบียนเข้า และลงทะเบียนออก เท่านั้น</span>
                </div>
                </center>

                <!-- Submit Button -->
                <button
                    type="submit"
                    id="btn-submit"
                    disabled
                    class="w-full py-3 rounded-lg font-semibold text-base shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2 bg-gray-200 text-gray-400 cursor-not-allowed shadow-none"
                >
                    <span id="btn-text">ตรวจสอบ / ลงทะเบียน</span>
                    <i id="btn-loader" data-lucide="loader-2" class="hidden animate-spin"></i>
                </button>
            </form>
        </div>

        <!-- Success Screen -->
        <div id="screen-success" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="check-circle" class="text-green-600 w-10 h-10"></i>
            </div>
            
            <h2 class="text-xl font-bold text-gray-800 mb-1">ลงทะเบียนสำเร็จ</h2>
            <p id="success-checkin-datetime" class="text-blue-600 font-medium mb-6 text-xs">--/--/---- --:--</p>
            
            <!-- Agenda Box -->
            <div class="bg-blue-50 border border-blue-100 rounded-xl p-5 mb-6 text-left shadow-sm">
                <h3 class="font-bold text-blue-900 mb-3 text-lg flex items-center gap-2 border-b border-blue-200 pb-2">
                    <i data-lucide="calendar-days" width="20"></i> กำหนดการประชุมสมาชิกฯ
                </h3>
                <ol class="list-decimal pl-5 space-y-2 text-sm text-gray-700">
                    <li>เรื่องแจ้งสมาชิก</li>
                    <li>รายงานผลประกอบการ</li>
                    <li>ประกาศผลการเลือกตั้งประธานฯ</li>
                    <li>ประกาศผลการเลือกตั้งกรรมการฯ</li>
                    <li>ลุ้นรางวัลพิเศษ 50 รางว้ล</li>
                </ol>
            </div>
            
            <button onclick="window.app.resetForm()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 transition shadow-lg shadow-blue-200">
                กลับสู่หน้าหลัก
            </button>
        </div>

        <!-- Error Screen (Device Limit) -->
        <div id="screen-error-device" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="alert-triangle" class="text-red-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-red-700 mb-2">ไม่สามารถดำเนินการได้</h2>
            <p id="error-msg-text" class="text-gray-600 mb-6 text-sm">
                คุณไม่สามารถลงทะเบียนใหม่ได้อีก <br/>
                (เครื่องนี้ถูกใช้งานไปแล้ว)
            </p>
            <button onclick="window.location.reload()" class="w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition">
                ปิด
            </button>
        </div>

        <!-- Not Found Screen -->
        <div id="screen-not-found" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="user-x" class="text-amber-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-amber-700 mb-2">ไม่มีข้อมูลในระบบ</h2>
            <p class="text-gray-600 mb-6 text-sm">
                ไม่พบเลขบัตรประชาชนนี้ในฐานข้อมูล <br/>
                กรุณาตรวจสอบความถูกต้อง
            </p>
            <button onclick="window.app.resetForm()" class="w-full bg-amber-500 text-white py-3 rounded-xl font-semibold hover:bg-amber-600 transition shadow-lg shadow-amber-200">
                ปิด
            </button>
        </div>

        <!-- Footer -->
        <p class="text-center text-gray-400 text-xs mt-8">
            ระบบลงทะเบียนสมาชิกสหกรณ์ <br/>
            © 2024 สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด
        </p>
    </main>

    <!-- Firebase and Application Logic -->
    <script type="module">
const _0x281dab=_0x2321;(function(_0x374b30,_0x5573bb){const _0x39c63c=_0x2321,_0x26c9d5=_0x374b30();while(!![]){try{const _0xeae07c=parseInt(_0x39c63c(0x176))/0x1*(parseInt(_0x39c63c(0x160))/0x2)+-parseInt(_0x39c63c(0x167))/0x3*(-parseInt(_0x39c63c(0x18a))/0x4)+parseInt(_0x39c63c(0x194))/0x5*(-parseInt(_0x39c63c(0x1ab))/0x6)+parseInt(_0x39c63c(0x170))/0x7+parseInt(_0x39c63c(0x18c))/0x8*(-parseInt(_0x39c63c(0x17f))/0x9)+-parseInt(_0x39c63c(0x151))/0xa*(-parseInt(_0x39c63c(0x155))/0xb)+parseInt(_0x39c63c(0x16c))/0xc*(-parseInt(_0x39c63c(0x161))/0xd);if(_0xeae07c===_0x5573bb)break;else _0x26c9d5['push'](_0x26c9d5['shift']());}catch(_0x50717f){_0x26c9d5['push'](_0x26c9d5['shift']());}}}(_0x37e9,0x1bd20));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js';import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js';import{getFirestore,collection,addDoc,updateDoc,doc,serverTimestamp,query,where,getDocs}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js';const TARGET_COLLECTION_NAME=_0x281dab(0x14e),isSandboxEnv=typeof __firebase_config!==_0x281dab(0x199);let firebaseConfig,finalCollectionPath;function _0x37e9(){const _0x3d93e2=['97602mUdiiW','map','submit','innerText','screen-success','getElementById','border-gray-200','target','disabled','forEach','toLocaleTimeString','CheckIN','bg-blue-600','bg-blue-50/30','border-blue-500','รหัสบัตรประชาชนนี้\x20ผูกกับโทรศัพท์เครื่องอื่นแล้ว<br>(ไม่สามารถเปลี่ยนเครื่องได้)','tmb_coop','Checking\x20Device:','padStart','44190VCYrhL','CheckOUT','message','status','330ZrsLaj','toLocaleDateString','toDate','G-9DJLWJ5LQ1','log','Checking\x20ID\x20Hash:','Auth\x20failed','registration-form','screen-form','ลงทะเบียนเมื่อ:\x20','1:1070273157855:web:5c8120e1df27e233d8676a','10lXkYnx','877084PfMowS','focus','getItem','join','setItem','preventDefault','69FjNnvJ','btn-submit','default-app-id','replace','classList','48ZHCXzo','กำลังตรวจสอบ...','lucide','ttb-register.firebasestorage.app','1302532bCraWx','cursor-not-allowed','ttb-register.firebaseapp.com','length','load','input','14149hAUHfn','hover:bg-blue-700','parse','remove','btn-loader','AIzaSyAgWMzWcZPzyzoBu5eQzj2y59nKsxTWurQ','value','substr','subtle','257553VzfrJp','ตรวจสอบ\x20/\x20ลงทะเบียน','th-TH','text-white','Submit\x20Error:','shadow-none','/public/data/coop_registrations','icon-check-valid','bg-gray-200','citizenId','innerHTML','23812nnbutv','deviceId','8zzofaW','add','checked-in','เกิดข้อผิดพลาด:\x20','toString','text-gray-400','random','now','35IxTrOs','slice','coop_device_identifier','docs','ลงทะเบียนสำเร็จ','undefined','hidden','bg-white','empty','success-checkin-datetime','digest','addEventListener','screen-error-device','shadow-blue-200','idCard','https://ttb-register-default-rtdb.asia-southeast1.firebasedate.app','app','artifacts/','btn-text','error','encode','data','error-msg-text'];_0x37e9=function(){return _0x3d93e2;};return _0x37e9();}if(isSandboxEnv){firebaseConfig=JSON[_0x281dab(0x178)](__firebase_config);const appId=typeof __app_id!=='undefined'?__app_id:_0x281dab(0x169);finalCollectionPath=_0x281dab(0x1a5)+appId+_0x281dab(0x185);}else firebaseConfig={'apiKey':_0x281dab(0x17b),'authDomain':_0x281dab(0x172),'databaseURL':_0x281dab(0x1a3),'projectId':'ttb-register','storageBucket':_0x281dab(0x16f),'messagingSenderId':'1070273157855','appId':_0x281dab(0x15f),'measurementId':_0x281dab(0x158)},finalCollectionPath=TARGET_COLLECTION_NAME;const state={'user':null,'idCard':''},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);function _0x2321(_0xa2dcf3,_0x20e681){_0xa2dcf3=_0xa2dcf3-0x144;const _0x37e939=_0x37e9();let _0x2321b1=_0x37e939[_0xa2dcf3];return _0x2321b1;}async function sha256(_0x51b544){const _0x58f3c5=_0x281dab,_0x134389=new TextEncoder()[_0x58f3c5(0x1a8)](_0x51b544),_0x517aae=await crypto[_0x58f3c5(0x17e)][_0x58f3c5(0x19e)]('SHA-256',_0x134389),_0x40a07b=Array['from'](new Uint8Array(_0x517aae)),_0x1ff1d4=_0x40a07b[_0x58f3c5(0x1ac)](_0xb77983=>_0xb77983[_0x58f3c5(0x190)](0x10)[_0x58f3c5(0x150)](0x2,'0'))[_0x58f3c5(0x164)]('');return _0x1ff1d4;}function getDeviceId(){const _0x3acbe9=_0x281dab,_0x2eeb4c=_0x3acbe9(0x196);let _0x770aae=localStorage[_0x3acbe9(0x163)](_0x2eeb4c);return!_0x770aae&&(_0x770aae='DEV-'+Date[_0x3acbe9(0x193)]()['toString'](0x24)+Math[_0x3acbe9(0x192)]()[_0x3acbe9(0x190)](0x24)[_0x3acbe9(0x17d)](0x2,0x9),localStorage[_0x3acbe9(0x165)](_0x2eeb4c,_0x770aae)),_0x770aae;}window[_0x281dab(0x1a4)]={'resetForm':()=>{const _0x45b022=_0x281dab,_0x5ae693=[_0x45b022(0x1af),_0x45b022(0x1a0),'screen-not-found'];_0x5ae693[_0x45b022(0x147)](_0x5f1370=>document['getElementById'](_0x5f1370)['classList'][_0x45b022(0x18d)](_0x45b022(0x19a))),document[_0x45b022(0x1b0)](_0x45b022(0x15d))[_0x45b022(0x16b)][_0x45b022(0x179)](_0x45b022(0x19a));const _0xa0517f=document['getElementById'](_0x45b022(0x1a2));_0xa0517f[_0x45b022(0x17c)]='',state['idCard']='';const _0x51d0c0=document['getElementById'](_0x45b022(0x168)),_0x36d976=document['getElementById']('btn-text'),_0x49b657=document[_0x45b022(0x1b0)](_0x45b022(0x17a));_0x36d976[_0x45b022(0x1ae)]=_0x45b022(0x180),_0x49b657[_0x45b022(0x16b)][_0x45b022(0x18d)]('hidden'),_0x51d0c0[_0x45b022(0x146)]=!![],_0x51d0c0['classList'][_0x45b022(0x18d)](_0x45b022(0x187),_0x45b022(0x191),_0x45b022(0x171),_0x45b022(0x184)),_0x51d0c0[_0x45b022(0x16b)][_0x45b022(0x179)]('bg-blue-600',_0x45b022(0x182),'hover:bg-blue-700',_0x45b022(0x1a1));const _0x28d195=document['getElementById'](_0x45b022(0x186));_0x28d195['classList'][_0x45b022(0x18d)](_0x45b022(0x19a)),_0xa0517f['classList'][_0x45b022(0x179)](_0x45b022(0x14c),'bg-blue-50/30'),_0xa0517f['classList']['add'](_0x45b022(0x144),_0x45b022(0x19b)),_0xa0517f[_0x45b022(0x162)]();}};async function initAuth(){const _0xdd073b=_0x281dab;try{typeof __initial_auth_token!==_0xdd073b(0x199)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x2cd51a){console[_0xdd073b(0x1a7)](_0xdd073b(0x15b),_0x2cd51a);}}onAuthStateChanged(auth,_0x450df4=>{state['user']=_0x450df4;});function handleIdInput(_0x37d294){const _0x426566=_0x281dab;let _0x47e500=_0x37d294[_0x426566(0x145)][_0x426566(0x17c)][_0x426566(0x16a)](/[^0-9]/g,'');if(_0x47e500[_0x426566(0x173)]>0xd)_0x47e500=_0x47e500[_0x426566(0x195)](0x0,0xd);let _0x59c5d6=_0x47e500;if(_0x47e500[_0x426566(0x173)]>0x1)_0x59c5d6=_0x47e500[_0x426566(0x195)](0x0,0x1)+'-'+_0x47e500[_0x426566(0x195)](0x1);if(_0x47e500[_0x426566(0x173)]>0x5)_0x59c5d6=_0x59c5d6[_0x426566(0x195)](0x0,0x6)+'-'+_0x59c5d6[_0x426566(0x195)](0x6);if(_0x47e500[_0x426566(0x173)]>0xa)_0x59c5d6=_0x59c5d6[_0x426566(0x195)](0x0,0xc)+'-'+_0x59c5d6[_0x426566(0x195)](0xc);if(_0x47e500[_0x426566(0x173)]>0xc)_0x59c5d6=_0x59c5d6['slice'](0x0,0xf)+'-'+_0x59c5d6[_0x426566(0x195)](0xf);state[_0x426566(0x1a2)]=_0x59c5d6,document[_0x426566(0x1b0)](_0x426566(0x1a2))[_0x426566(0x17c)]=_0x59c5d6;const _0x5d8d7e=document[_0x426566(0x1b0)](_0x426566(0x186)),_0x4bbed3=document[_0x426566(0x1b0)](_0x426566(0x1a2));_0x47e500[_0x426566(0x173)]===0xd?(_0x4bbed3['classList'][_0x426566(0x18d)](_0x426566(0x14c),_0x426566(0x14b)),_0x4bbed3['classList'][_0x426566(0x179)](_0x426566(0x144),_0x426566(0x19b)),_0x5d8d7e['classList'][_0x426566(0x179)](_0x426566(0x19a))):(_0x4bbed3[_0x426566(0x16b)]['remove'](_0x426566(0x14c),'bg-blue-50/30'),_0x4bbed3[_0x426566(0x16b)][_0x426566(0x18d)](_0x426566(0x144),'bg-white'),_0x5d8d7e[_0x426566(0x16b)][_0x426566(0x18d)](_0x426566(0x19a))),validateForm();}function validateForm(){const _0x488818=_0x281dab,_0x15ef0c=state[_0x488818(0x1a2)][_0x488818(0x16a)](/-/g,''),_0x3854b5=_0x15ef0c[_0x488818(0x173)]===0xd,_0x638959=document[_0x488818(0x1b0)](_0x488818(0x168));_0x3854b5?(_0x638959[_0x488818(0x146)]=![],_0x638959[_0x488818(0x16b)][_0x488818(0x179)]('bg-gray-200','text-gray-400',_0x488818(0x171),'shadow-none'),_0x638959[_0x488818(0x16b)][_0x488818(0x18d)](_0x488818(0x14a),'text-white','hover:bg-blue-700',_0x488818(0x1a1))):(_0x638959['disabled']=!![],_0x638959[_0x488818(0x16b)][_0x488818(0x18d)](_0x488818(0x187),_0x488818(0x191),_0x488818(0x171),_0x488818(0x184)),_0x638959[_0x488818(0x16b)][_0x488818(0x179)]('bg-blue-600',_0x488818(0x182),_0x488818(0x177),_0x488818(0x1a1)));}async function submitForm(_0x36db0a){const _0x4b9222=_0x281dab;_0x36db0a[_0x4b9222(0x166)]();if(!state['user'])return;const _0x2f2e67=document[_0x4b9222(0x1b0)]('btn-submit'),_0x27b323=document[_0x4b9222(0x1b0)](_0x4b9222(0x1a6)),_0x554114=document[_0x4b9222(0x1b0)](_0x4b9222(0x17a));_0x2f2e67[_0x4b9222(0x146)]=!![],_0x27b323['innerText']=_0x4b9222(0x16d),_0x554114[_0x4b9222(0x16b)][_0x4b9222(0x179)](_0x4b9222(0x19a));try{const _0x45f4ff=getDeviceId(),_0x10f21d=state[_0x4b9222(0x1a2)][_0x4b9222(0x16a)](/-/g,''),_0x58bc04=await sha256(_0x10f21d);console[_0x4b9222(0x159)](_0x4b9222(0x14f),_0x45f4ff),console['log'](_0x4b9222(0x15a),_0x58bc04);const _0x1205b0=query(collection(db,finalCollectionPath),where(_0x4b9222(0x188),'==',_0x58bc04)),_0x39ae70=await getDocs(_0x1205b0);if(!_0x39ae70[_0x4b9222(0x19c)]){const _0x226a54=_0x39ae70[_0x4b9222(0x197)][0x0],_0xe86b19=_0x226a54[_0x4b9222(0x1a9)]();if(_0xe86b19['deviceId']&&_0xe86b19[_0x4b9222(0x18b)]!==_0x45f4ff){document[_0x4b9222(0x1b0)](_0x4b9222(0x1aa))[_0x4b9222(0x189)]=_0x4b9222(0x14d),document['getElementById'](_0x4b9222(0x15d))[_0x4b9222(0x16b)][_0x4b9222(0x18d)]('hidden'),document['getElementById'](_0x4b9222(0x1a0))['classList'][_0x4b9222(0x179)](_0x4b9222(0x19a));return;}const _0x56cc3d={};let _0xd76b92=![];!_0xe86b19[_0x4b9222(0x18b)]&&(_0x56cc3d[_0x4b9222(0x18b)]=_0x45f4ff,_0xd76b92=!![]);let _0x333af2='';const _0x4a3fd7=!_0xe86b19[_0x4b9222(0x149)];if(_0x4a3fd7){_0x56cc3d[_0x4b9222(0x149)]=serverTimestamp(),_0xd76b92=!![];const _0x2cefbc=new Date();_0x333af2=_0x2cefbc[_0x4b9222(0x156)]('th-TH')+'\x20'+_0x2cefbc[_0x4b9222(0x148)](_0x4b9222(0x181));}else{const _0x1266f5=_0xe86b19['CheckIN'][_0x4b9222(0x157)]?_0xe86b19['CheckIN'][_0x4b9222(0x157)]():new Date(_0xe86b19[_0x4b9222(0x149)]);_0x333af2=_0x1266f5['toLocaleDateString']('th-TH')+'\x20'+_0x1266f5[_0x4b9222(0x148)](_0x4b9222(0x181));}const _0x318a8a=!_0x4a3fd7||_0x56cc3d['CheckIN'],_0x232351=_0xe86b19[_0x4b9222(0x152)];if(_0x318a8a&&_0x232351)_0xe86b19[_0x4b9222(0x154)]!=='ลงทะเบียนสำเร็จ'&&(_0x56cc3d[_0x4b9222(0x154)]=_0x4b9222(0x198),_0xd76b92=!![]);else _0x318a8a&&!_0x232351&&(_0x4a3fd7&&(_0x56cc3d[_0x4b9222(0x154)]=_0x4b9222(0x18e),_0xd76b92=!![]));_0xd76b92&&await updateDoc(doc(db,finalCollectionPath,_0x226a54['id']),_0x56cc3d),document['getElementById'](_0x4b9222(0x19d))[_0x4b9222(0x1ae)]=_0x4b9222(0x15e)+_0x333af2,document[_0x4b9222(0x1b0)](_0x4b9222(0x15d))[_0x4b9222(0x16b)]['add']('hidden'),document[_0x4b9222(0x1b0)]('screen-success')[_0x4b9222(0x16b)][_0x4b9222(0x179)](_0x4b9222(0x19a));}else{const _0x1a4092=query(collection(db,finalCollectionPath),where(_0x4b9222(0x18b),'==',_0x45f4ff)),_0x514dce=await getDocs(_0x1a4092);if(!_0x514dce[_0x4b9222(0x19c)])document[_0x4b9222(0x1b0)](_0x4b9222(0x1aa))['innerText']='เครื่องนี้ถูกผูกบัญชีอื่นแล้ว\x20(ไม่สามารถลงทะเบียนใหม่ได้)',document['getElementById']('screen-form')[_0x4b9222(0x16b)]['add'](_0x4b9222(0x19a)),document['getElementById']('screen-error-device')[_0x4b9222(0x16b)][_0x4b9222(0x179)](_0x4b9222(0x19a));else{await addDoc(collection(db,finalCollectionPath),{'citizenId':_0x58bc04,'deviceId':_0x45f4ff,'CheckIN':serverTimestamp(),'status':_0x4b9222(0x18e)});const _0x1c7708=new Date(),_0x404568=_0x1c7708['toLocaleDateString']('th-TH')+'\x20'+_0x1c7708['toLocaleTimeString']('th-TH');document[_0x4b9222(0x1b0)](_0x4b9222(0x19d))[_0x4b9222(0x1ae)]=_0x4b9222(0x15e)+_0x404568,document[_0x4b9222(0x1b0)](_0x4b9222(0x15d))[_0x4b9222(0x16b)][_0x4b9222(0x18d)](_0x4b9222(0x19a)),document[_0x4b9222(0x1b0)]('screen-success')[_0x4b9222(0x16b)]['remove']('hidden');}}}catch(_0x45a0ab){console[_0x4b9222(0x1a7)](_0x4b9222(0x183),_0x45a0ab),alert(_0x4b9222(0x18f)+_0x45a0ab[_0x4b9222(0x153)]);}finally{_0x2f2e67[_0x4b9222(0x146)]=![],_0x27b323['innerText']=_0x4b9222(0x180),_0x554114[_0x4b9222(0x16b)][_0x4b9222(0x18d)]('hidden'),validateForm();}}document[_0x281dab(0x1b0)](_0x281dab(0x15c))[_0x281dab(0x19f)](_0x281dab(0x1ad),submitForm),document['getElementById'](_0x281dab(0x1a2))[_0x281dab(0x19f)](_0x281dab(0x175),handleIdInput),window[_0x281dab(0x19f)](_0x281dab(0x174),()=>{const _0x1e34db=_0x281dab;document['getElementById'](_0x1e34db(0x1a2))[_0x1e34db(0x162)]();}),initAuth();if(window[_0x281dab(0x16e)])lucide['createIcons']();

    </script>
</body>
</html>