<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Font (Sarabun) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .hidden { display: none !important; }
        /* Custom Animations */
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        
        /* Remove number arrows */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-10">

    <!-- Header Section -->
    <div class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white p-6 rounded-b-[2.5rem] shadow-lg mb-8 relative overflow-hidden">
        <div class="absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10">
            <i data-lucide="shield-check" width="150" height="150"></i>
        </div>
        
        <div class="relative z-10 flex flex-col items-center">
            <div class="bg-white/20 p-3 rounded-full mb-3 backdrop-blur-sm">
                <i data-lucide="user" width="32" height="32" class="text-white"></i>
            </div>
            <h1 class="text-xl font-bold text-center">ลงทะเบียนสมาชิก</h1>
            <p class="text-blue-100 text-sm mt-1">สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด</p>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="px-2 sm:px-4 max-w-lg mx-auto -mt-10">
        
        <!-- Registration Form Screen -->
        <div id="screen-form" class="bg-white rounded-2xl shadow-xl p-6 border border-slate-100 relative z-20">
            
            <form id="registration-form" class="space-y-6 pt-2">
                <center>
                <!-- Single Input ID Card -->
                <div>
                    <label for="idCard" class="block text-sm font-semibold text-gray-700 mb-2">
                        เลขบัตรประจำตัวประชาชน
                    </label>
                    <div class="relative">
                        <input
                            type="text"
                            id="idCard"
                            placeholder="x-xxxx-xxxxx-xx-x"
                            class="w-full text-xl font-mono tracking-wide p-4 rounded-xl border-2 border-gray-200 bg-white focus:border-blue-400 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center"
                            inputmode="numeric"
                            maxlength="17"
                        />
                        <i id="icon-check-valid" data-lucide="check-circle" class="hidden absolute right-4 top-1/2 transform -translate-y-1/2 text-green-500 w-6 h-6 animate-fade-in"></i>
                    </div>
                    <p class="text-xs text-gray-400 mt-2 ml-1">กรุณากรอกตัวเลข 13 หลักให้ครบถ้วน</p>
                </div>

                <!-- Info Box -->
                <div class="p-3 bg-blue-50 text-blue-800 rounded-lg text-xs flex gap-2 items-start" style="margin-top:25px; text-align: left;">
                    <i data-lucide="info" class="w-4 h-4 shrink-0 mt-0.5"></i>
                    <span>จำกัดสิทธิ์ 1 เครื่องโทรศัพท์ต่อ 1 หมายเลขบัตรฯ เท่านั้น<br>ผู้ที่จะได้รับรางวัลค่าตอบแทนการประชุม 200 บาทจะต้องลงทะเบียนเข้า และลงทะเบียนออก เท่านั้น</span>
                </div>
                </center>

                <!-- Submit Button -->
                <button
                    type="submit"
                    id="btn-submit"
                    disabled
                    class="w-full py-3 rounded-lg font-semibold text-base shadow-lg transition-all transform active:scale-95 flex items-center justify-center gap-2 bg-gray-200 text-gray-400 cursor-not-allowed shadow-none"
                >
                    <span id="btn-text">ตรวจสอบ / ลงทะเบียน</span>
                    <i id="btn-loader" data-lucide="loader-2" class="hidden animate-spin"></i>
                </button>
            </form>
        </div>

        <!-- Success Screen -->
        <div id="screen-success" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="check-circle" class="text-green-600 w-10 h-10"></i>
            </div>
            
            <h2 class="text-xl font-bold text-gray-800 mb-1">ลงทะเบียนสำเร็จ</h2>
            <p id="success-checkin-datetime" class="text-blue-600 font-medium mb-6 text-xs">--/--/---- --:--</p>
            
            <!-- Agenda Box -->
            <div class="bg-blue-50 border border-blue-100 rounded-xl p-5 mb-6 text-left shadow-sm">
                <h3 class="font-bold text-blue-900 mb-3 text-lg flex items-center gap-2 border-b border-blue-200 pb-2">
                    <i data-lucide="calendar-days" width="20"></i> กำหนดการประชุมสมาชิกฯ
                </h3>
                <ol class="list-decimal pl-5 space-y-2 text-sm text-gray-700">
                    <li>เรื่องแจ้งสมาชิก</li>
                    <li>รายงานผลประกอบการ</li>
                    <li>ประกาศผลการเลือกตั้งประธานฯ</li>
                    <li>ประกาศผลการเลือกตั้งกรรมการฯ</li>
                    <li>ลุ้นรางวัลพิเศษ 50 รางว้ล</li>
                </ol>
            </div>
            
            <button onclick="window.app.resetForm()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold hover:bg-blue-700 transition shadow-lg shadow-blue-200">
                กลับสู่หน้าหลัก
            </button>
        </div>

        <!-- Error Screen (Device Limit) -->
        <div id="screen-error-device" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="alert-triangle" class="text-red-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-red-700 mb-2">ไม่สามารถดำเนินการได้</h2>
            <p id="error-msg-text" class="text-gray-600 mb-6 text-sm">
                คุณไม่สามารถลงทะเบียนใหม่ได้อีก <br/>
                (เครื่องนี้ถูกใช้งานไปแล้ว)
            </p>
            <button onclick="window.location.reload()" class="w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition">
                ปิด
            </button>
        </div>

        <!-- Not Found Screen -->
        <div id="screen-not-found" class="hidden bg-white rounded-2xl shadow-xl p-8 w-full text-center animate-fade-in relative z-20">
            <div class="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i data-lucide="user-x" class="text-amber-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold text-amber-700 mb-2">ไม่มีข้อมูลในระบบ</h2>
            <p class="text-gray-600 mb-6 text-sm">
                ไม่พบเลขบัตรประชาชนนี้ในฐานข้อมูล <br/>
                กรุณาตรวจสอบความถูกต้อง
            </p>
            <button onclick="window.app.resetForm()" class="w-full bg-amber-500 text-white py-3 rounded-xl font-semibold hover:bg-amber-600 transition shadow-lg shadow-amber-200">
                ปิด
            </button>
        </div>

        <!-- Footer -->
        <p class="text-center text-gray-400 text-xs mt-8">
            ระบบลงทะเบียนสมาชิกสหกรณ์ <br/>
            © 2024 สหกรณ์ออมทรัพย์พนักงานธนาคารทหารไทย จำกัด
        </p>
    </main>

    <!-- Firebase and Application Logic -->
    <script type="module">
const _0x929b3d=_0x5ae9;(function(_0xe4e5c8,_0x323e70){const _0x424837=_0x5ae9,_0x1ff29c=_0xe4e5c8();while(!![]){try{const _0x154b35=-parseInt(_0x424837(0x1d5))/0x1+-parseInt(_0x424837(0x1cb))/0x2*(parseInt(_0x424837(0x20f))/0x3)+-parseInt(_0x424837(0x1bb))/0x4+-parseInt(_0x424837(0x217))/0x5*(-parseInt(_0x424837(0x1f5))/0x6)+parseInt(_0x424837(0x1f6))/0x7*(-parseInt(_0x424837(0x1c5))/0x8)+parseInt(_0x424837(0x1c1))/0x9*(parseInt(_0x424837(0x204))/0xa)+parseInt(_0x424837(0x1fb))/0xb*(parseInt(_0x424837(0x1e9))/0xc);if(_0x154b35===_0x323e70)break;else _0x1ff29c['push'](_0x1ff29c['shift']());}catch(_0x1d53af){_0x1ff29c['push'](_0x1ff29c['shift']());}}}(_0x2bbc,0x7f483));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js';import{getAuth,signInAnonymously,onAuthStateChanged,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js';import{getFirestore,collection,addDoc,updateDoc,doc,serverTimestamp,query,where,getDocs}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js';const TARGET_COLLECTION_NAME=_0x929b3d(0x1d4),isSandboxEnv=typeof __firebase_config!=='undefined';let firebaseConfig,finalCollectionPath;if(isSandboxEnv){firebaseConfig=JSON[_0x929b3d(0x1f2)](__firebase_config);const appId=typeof __app_id!==_0x929b3d(0x20a)?__app_id:'default-app-id';finalCollectionPath=_0x929b3d(0x1d2)+appId+_0x929b3d(0x215);}else firebaseConfig={'apiKey':_0x929b3d(0x1b3),'authDomain':_0x929b3d(0x1e4),'databaseURL':_0x929b3d(0x200),'projectId':'ttb-register','storageBucket':_0x929b3d(0x1ce),'messagingSenderId':_0x929b3d(0x1f4),'appId':_0x929b3d(0x1cc),'measurementId':_0x929b3d(0x1d8)},finalCollectionPath=TARGET_COLLECTION_NAME;function _0x2bbc(){const _0x8c6113=['toLocaleTimeString','classList','encode','text-gray-400','status','AIzaSyAgWMzWcZPzyzoBu5eQzj2y59nKsxTWurQ','deviceId','error-msg-text','app','screen-not-found','empty','DEV-','shadow-none','4137652qemLtJ','bg-blue-600','remove','hover:bg-blue-700','screen-error-device','slice','9075114dGANjY','createIcons','join','screen-success','56DJAHvL','bg-white','forEach','btn-loader','citizenId','bg-gray-200','718870wPASOA','1:1070273157855:web:5c8120e1df27e233d8676a','now','ttb-register.firebasestorage.app','target','toLocaleDateString','CheckOUT','artifacts/','innerText','tmb_coop','91660XKUDjg','CheckIN','toString','G-9DJLWJ5LQ1','getElementById','เครื่องนี้ถูกผูกบัญชีอื่นแล้ว\x20(ไม่สามารถลงทะเบียนใหม่ได้)','Submit\x20Error:','docs','value','user','icon-check-valid','Checking\x20ID\x20Hash:','ลงทะเบียนเมื่อ:\x20','border-gray-200','registration-form','ttb-register.firebaseapp.com','SHA-256','ตรวจสอบ\x20/\x20ลงทะเบียน','getItem','btn-submit','50760YAOrWr','digest','add','เกิดข้อผิดพลาด:\x20','coop_device_identifier','ลงทะเบียนสำเร็จ','success-checkin-datetime','checked-in','text-white','parse','shadow-blue-200','1070273157855','6LbQqhf','4844BXnrNX','random','message','btn-text','submit','2871DHlmvU','log','Checking\x20Device:','th-TH','toDate','https://ttb-register-default-rtdb.asia-southeast1.firebasedate.app','border-blue-500','error','replace','10PhkafA','bg-blue-50/30','padStart','idCard','map','addEventListener','undefined','กำลังตรวจสอบ...','substr','hidden','disabled','6xQucOY','focus','lucide','Auth\x20failed','setItem','screen-form','/public/data/coop_registrations','length','1293790ocXfNC'];_0x2bbc=function(){return _0x8c6113;};return _0x2bbc();}const state={'user':null,'idCard':''},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);async function sha256(_0xd6cb32){const _0x490d62=_0x929b3d,_0x36dadf=new TextEncoder()[_0x490d62(0x21a)](_0xd6cb32),_0x26c410=await crypto['subtle'][_0x490d62(0x1ea)](_0x490d62(0x1e5),_0x36dadf),_0x1091d6=Array['from'](new Uint8Array(_0x26c410)),_0x170d9b=_0x1091d6[_0x490d62(0x208)](_0x55f0d4=>_0x55f0d4['toString'](0x10)[_0x490d62(0x206)](0x2,'0'))[_0x490d62(0x1c3)]('');return _0x170d9b;}function getDeviceId(){const _0x3194d9=_0x929b3d,_0x554400=_0x3194d9(0x1ed);let _0x3ccfc6=localStorage[_0x3194d9(0x1e7)](_0x554400);return!_0x3ccfc6&&(_0x3ccfc6=_0x3194d9(0x1b9)+Date[_0x3194d9(0x1cd)]()[_0x3194d9(0x1d7)](0x24)+Math[_0x3194d9(0x1f7)]()[_0x3194d9(0x1d7)](0x24)[_0x3194d9(0x20c)](0x2,0x9),localStorage[_0x3194d9(0x213)](_0x554400,_0x3ccfc6)),_0x3ccfc6;}window[_0x929b3d(0x1b6)]={'resetForm':()=>{const _0x1ad669=_0x929b3d,_0x1d6049=[_0x1ad669(0x1c4),_0x1ad669(0x1bf),_0x1ad669(0x1b7)];_0x1d6049[_0x1ad669(0x1c7)](_0x18b0f0=>document[_0x1ad669(0x1d9)](_0x18b0f0)['classList'][_0x1ad669(0x1eb)](_0x1ad669(0x20d))),document[_0x1ad669(0x1d9)](_0x1ad669(0x214))[_0x1ad669(0x219)][_0x1ad669(0x1bd)](_0x1ad669(0x20d));const _0x4e3d2e=document[_0x1ad669(0x1d9)]('idCard');_0x4e3d2e['value']='',state[_0x1ad669(0x207)]='';const _0x1a6523=document['getElementById'](_0x1ad669(0x1e8)),_0x35fdf6=document[_0x1ad669(0x1d9)](_0x1ad669(0x1f9)),_0xe527c=document['getElementById']('btn-loader');_0x35fdf6[_0x1ad669(0x1d3)]=_0x1ad669(0x1e6),_0xe527c[_0x1ad669(0x219)][_0x1ad669(0x1eb)]('hidden'),_0x1a6523[_0x1ad669(0x20e)]=!![],_0x1a6523['classList'][_0x1ad669(0x1eb)](_0x1ad669(0x1ca),_0x1ad669(0x21b),'cursor-not-allowed','shadow-none'),_0x1a6523[_0x1ad669(0x219)][_0x1ad669(0x1bd)](_0x1ad669(0x1bc),'text-white','hover:bg-blue-700',_0x1ad669(0x1f3));const _0x3ed74f=document[_0x1ad669(0x1d9)]('icon-check-valid');_0x3ed74f[_0x1ad669(0x219)][_0x1ad669(0x1eb)](_0x1ad669(0x20d)),_0x4e3d2e[_0x1ad669(0x219)][_0x1ad669(0x1bd)](_0x1ad669(0x201),'bg-blue-50/30'),_0x4e3d2e[_0x1ad669(0x219)][_0x1ad669(0x1eb)](_0x1ad669(0x1e2),_0x1ad669(0x1c6)),_0x4e3d2e[_0x1ad669(0x210)]();}};async function initAuth(){const _0x25ac52=_0x929b3d;try{typeof __initial_auth_token!=='undefined'&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x2bac33){console[_0x25ac52(0x202)](_0x25ac52(0x212),_0x2bac33);}}onAuthStateChanged(auth,_0x486d1e=>{const _0x570e63=_0x929b3d;state[_0x570e63(0x1de)]=_0x486d1e;});function _0x5ae9(_0x285f59,_0x55efeb){_0x285f59=_0x285f59-0x1b3;const _0x2bbc6b=_0x2bbc();let _0x5ae953=_0x2bbc6b[_0x285f59];return _0x5ae953;}function handleIdInput(_0x568e4a){const _0x156b5b=_0x929b3d;let _0x25c0a7=_0x568e4a[_0x156b5b(0x1cf)]['value'][_0x156b5b(0x203)](/[^0-9]/g,'');if(_0x25c0a7[_0x156b5b(0x216)]>0xd)_0x25c0a7=_0x25c0a7[_0x156b5b(0x1c0)](0x0,0xd);let _0x53b6d7=_0x25c0a7;if(_0x25c0a7[_0x156b5b(0x216)]>0x1)_0x53b6d7=_0x25c0a7[_0x156b5b(0x1c0)](0x0,0x1)+'-'+_0x25c0a7[_0x156b5b(0x1c0)](0x1);if(_0x25c0a7['length']>0x5)_0x53b6d7=_0x53b6d7['slice'](0x0,0x6)+'-'+_0x53b6d7[_0x156b5b(0x1c0)](0x6);if(_0x25c0a7[_0x156b5b(0x216)]>0xa)_0x53b6d7=_0x53b6d7['slice'](0x0,0xc)+'-'+_0x53b6d7[_0x156b5b(0x1c0)](0xc);if(_0x25c0a7[_0x156b5b(0x216)]>0xc)_0x53b6d7=_0x53b6d7[_0x156b5b(0x1c0)](0x0,0xf)+'-'+_0x53b6d7['slice'](0xf);state['idCard']=_0x53b6d7,document[_0x156b5b(0x1d9)]('idCard')[_0x156b5b(0x1dd)]=_0x53b6d7;const _0x148218=document[_0x156b5b(0x1d9)](_0x156b5b(0x1df)),_0x1340f0=document[_0x156b5b(0x1d9)](_0x156b5b(0x207));_0x25c0a7[_0x156b5b(0x216)]===0xd?(_0x1340f0['classList']['add'](_0x156b5b(0x201),_0x156b5b(0x205)),_0x1340f0[_0x156b5b(0x219)][_0x156b5b(0x1bd)](_0x156b5b(0x1e2),_0x156b5b(0x1c6)),_0x148218[_0x156b5b(0x219)][_0x156b5b(0x1bd)]('hidden')):(_0x1340f0['classList'][_0x156b5b(0x1bd)]('border-blue-500',_0x156b5b(0x205)),_0x1340f0['classList']['add'](_0x156b5b(0x1e2),_0x156b5b(0x1c6)),_0x148218[_0x156b5b(0x219)][_0x156b5b(0x1eb)]('hidden')),validateForm();}function validateForm(){const _0x2c1a8c=_0x929b3d,_0x3f1dbc=state[_0x2c1a8c(0x207)][_0x2c1a8c(0x203)](/-/g,''),_0x15b0ef=_0x3f1dbc['length']===0xd,_0x30423d=document[_0x2c1a8c(0x1d9)](_0x2c1a8c(0x1e8));_0x15b0ef?(_0x30423d[_0x2c1a8c(0x20e)]=![],_0x30423d[_0x2c1a8c(0x219)][_0x2c1a8c(0x1bd)](_0x2c1a8c(0x1ca),_0x2c1a8c(0x21b),'cursor-not-allowed',_0x2c1a8c(0x1ba)),_0x30423d[_0x2c1a8c(0x219)][_0x2c1a8c(0x1eb)](_0x2c1a8c(0x1bc),_0x2c1a8c(0x1f1),_0x2c1a8c(0x1be),_0x2c1a8c(0x1f3))):(_0x30423d[_0x2c1a8c(0x20e)]=!![],_0x30423d['classList'][_0x2c1a8c(0x1eb)](_0x2c1a8c(0x1ca),'text-gray-400','cursor-not-allowed','shadow-none'),_0x30423d[_0x2c1a8c(0x219)][_0x2c1a8c(0x1bd)]('bg-blue-600',_0x2c1a8c(0x1f1),'hover:bg-blue-700','shadow-blue-200'));}async function submitForm(_0x31cf47){const _0x217acb=_0x929b3d;_0x31cf47['preventDefault']();if(!state[_0x217acb(0x1de)])return;const _0x5443c2=document[_0x217acb(0x1d9)](_0x217acb(0x1e8)),_0x4a6d00=document[_0x217acb(0x1d9)]('btn-text'),_0x39d4f0=document['getElementById'](_0x217acb(0x1c8));_0x5443c2['disabled']=!![],_0x4a6d00['innerText']=_0x217acb(0x20b),_0x39d4f0[_0x217acb(0x219)][_0x217acb(0x1bd)](_0x217acb(0x20d));try{const _0x22645f=getDeviceId(),_0x1fe812=state[_0x217acb(0x207)][_0x217acb(0x203)](/-/g,''),_0x5ac1b9=await sha256(_0x1fe812);console[_0x217acb(0x1fc)](_0x217acb(0x1fd),_0x22645f),console['log'](_0x217acb(0x1e0),_0x5ac1b9);const _0x1571a1=query(collection(db,finalCollectionPath),where(_0x217acb(0x1c9),'==',_0x5ac1b9)),_0x4b6044=await getDocs(_0x1571a1);if(!_0x4b6044[_0x217acb(0x1b8)]){const _0x3d3768=_0x4b6044[_0x217acb(0x1dc)][0x0],_0x5b432f=_0x3d3768['data']();if(_0x5b432f[_0x217acb(0x1b4)]&&_0x5b432f[_0x217acb(0x1b4)]!==_0x22645f){document[_0x217acb(0x1d9)](_0x217acb(0x1b5))['innerHTML']='รหัสบัตรประชาชนนี้\x20ผูกกับโทรศัพท์เครื่องอื่นแล้ว<br>(ไม่สามารถเปลี่ยนเครื่องได้)',document[_0x217acb(0x1d9)](_0x217acb(0x214))['classList'][_0x217acb(0x1eb)](_0x217acb(0x20d)),document[_0x217acb(0x1d9)](_0x217acb(0x1bf))[_0x217acb(0x219)]['remove']('hidden');return;}const _0x2e746f={};let _0x1cb80a=![];!_0x5b432f[_0x217acb(0x1b4)]&&(_0x2e746f[_0x217acb(0x1b4)]=_0x22645f,_0x1cb80a=!![]);let _0x1f03ed='';const _0x1c6c6c=!_0x5b432f[_0x217acb(0x1d6)];if(_0x1c6c6c){_0x2e746f[_0x217acb(0x1d6)]=serverTimestamp(),_0x1cb80a=!![];const _0xb8926c=new Date();_0x1f03ed=_0xb8926c[_0x217acb(0x1d0)]('th-TH')+'\x20'+_0xb8926c[_0x217acb(0x218)](_0x217acb(0x1fe));}else{const _0x365925=_0x5b432f['CheckIN'][_0x217acb(0x1ff)]?_0x5b432f[_0x217acb(0x1d6)][_0x217acb(0x1ff)]():new Date(_0x5b432f[_0x217acb(0x1d6)]);_0x1f03ed=_0x365925['toLocaleDateString'](_0x217acb(0x1fe))+'\x20'+_0x365925[_0x217acb(0x218)]('th-TH');}const _0x223534=!_0x1c6c6c||_0x2e746f[_0x217acb(0x1d6)],_0x1a341f=_0x5b432f[_0x217acb(0x1d1)];if(_0x223534&&_0x1a341f)_0x5b432f[_0x217acb(0x21c)]!=='ลงทะเบียนสำเร็จ'&&(_0x2e746f[_0x217acb(0x21c)]=_0x217acb(0x1ee),_0x1cb80a=!![]);else _0x223534&&!_0x1a341f&&(_0x1c6c6c&&(_0x2e746f[_0x217acb(0x21c)]=_0x217acb(0x1f0),_0x1cb80a=!![]));_0x1cb80a&&await updateDoc(doc(db,finalCollectionPath,_0x3d3768['id']),_0x2e746f),document[_0x217acb(0x1d9)](_0x217acb(0x1ef))['innerText']=_0x217acb(0x1e1)+_0x1f03ed,document[_0x217acb(0x1d9)](_0x217acb(0x214))['classList'][_0x217acb(0x1eb)](_0x217acb(0x20d)),document[_0x217acb(0x1d9)](_0x217acb(0x1c4))[_0x217acb(0x219)][_0x217acb(0x1bd)](_0x217acb(0x20d));}else{const _0x2f8d2f=query(collection(db,finalCollectionPath),where(_0x217acb(0x1b4),'==',_0x22645f)),_0x3b409d=await getDocs(_0x2f8d2f);if(!_0x3b409d[_0x217acb(0x1b8)])document['getElementById'](_0x217acb(0x1b5))[_0x217acb(0x1d3)]=_0x217acb(0x1da),document[_0x217acb(0x1d9)](_0x217acb(0x214))[_0x217acb(0x219)]['add'](_0x217acb(0x20d)),document['getElementById'](_0x217acb(0x1bf))[_0x217acb(0x219)][_0x217acb(0x1bd)](_0x217acb(0x20d));else{await addDoc(collection(db,finalCollectionPath),{'citizenId':_0x5ac1b9,'deviceId':_0x22645f,'CheckIN':serverTimestamp(),'status':_0x217acb(0x1f0)});const _0x45de57=new Date(),_0xb294b1=_0x45de57[_0x217acb(0x1d0)](_0x217acb(0x1fe))+'\x20'+_0x45de57['toLocaleTimeString'](_0x217acb(0x1fe));document['getElementById'](_0x217acb(0x1ef))[_0x217acb(0x1d3)]='ลงทะเบียนเมื่อ:\x20'+_0xb294b1,document[_0x217acb(0x1d9)]('screen-form')['classList'][_0x217acb(0x1eb)](_0x217acb(0x20d)),document[_0x217acb(0x1d9)](_0x217acb(0x1c4))['classList']['remove']('hidden');}}}catch(_0x4bde02){console[_0x217acb(0x202)](_0x217acb(0x1db),_0x4bde02),alert(_0x217acb(0x1ec)+_0x4bde02[_0x217acb(0x1f8)]);}finally{_0x5443c2[_0x217acb(0x20e)]=![],_0x4a6d00[_0x217acb(0x1d3)]=_0x217acb(0x1e6),_0x39d4f0[_0x217acb(0x219)][_0x217acb(0x1eb)](_0x217acb(0x20d)),validateForm();}}document[_0x929b3d(0x1d9)](_0x929b3d(0x1e3))[_0x929b3d(0x209)](_0x929b3d(0x1fa),submitForm),document[_0x929b3d(0x1d9)]('idCard')[_0x929b3d(0x209)]('input',handleIdInput),window['addEventListener']('load',()=>{const _0x5125e5=_0x929b3d;document[_0x5125e5(0x1d9)](_0x5125e5(0x207))[_0x5125e5(0x210)]();}),initAuth();if(window[_0x929b3d(0x211)])lucide[_0x929b3d(0x1c2)]();

    </script>
</body>
</html>